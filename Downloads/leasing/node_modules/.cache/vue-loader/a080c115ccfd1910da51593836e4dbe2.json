{"remainingRequest":"/home/tamanna/htdocs/carconfiguratorfrontend/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/tamanna/htdocs/carconfiguratorfrontend/src/views/CarPolicy.vue?vue&type=style&index=1&id=d1f1b348&lang=sass","dependencies":[{"path":"/home/tamanna/htdocs/carconfiguratorfrontend/src/views/CarPolicy.vue","mtime":1691610165536},{"path":"/home/tamanna/htdocs/carconfiguratorfrontend/node_modules/css-loader/dist/cjs.js","mtime":1691610261655},{"path":"/home/tamanna/htdocs/carconfiguratorfrontend/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1691610261934},{"path":"/home/tamanna/htdocs/carconfiguratorfrontend/node_modules/postcss-loader/src/index.js","mtime":1691610261845},{"path":"/home/tamanna/htdocs/carconfiguratorfrontend/node_modules/sass-loader/dist/cjs.js","mtime":1691610266130},{"path":"/home/tamanna/htdocs/carconfiguratorfrontend/node_modules/cache-loader/dist/cjs.js","mtime":1691610247617},{"path":"/home/tamanna/htdocs/carconfiguratorfrontend/node_modules/vue-loader-v16/dist/index.js","mtime":1691610261934}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CkBpbXBvcnQgJ352dWUtc2xpZGVyLWNvbXBvbmVudC9saWIvdGhlbWUvZGVmYXVsdC5zY3NzJwo="},{"version":3,"sources":["/home/tamanna/htdocs/carconfiguratorfrontend/src/views/CarPolicy.vue"],"names":[],"mappings":";AAm9BA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC","file":"/home/tamanna/htdocs/carconfiguratorfrontend/src/views/CarPolicy.vue","sourceRoot":"","sourcesContent":["<template>\n  <MessageBar v-if=\"roles.includes('ROLE_SUPER_ADMIN') && companyDetailState.name\">\n    <template v-slot:header>{{ $t('_infoPopup.adminMessage') }} {{ companyDetailState.name }}</template>\n  </MessageBar>\n  <div class=\"car-policy-wrap\" v-if=\"!loader\">\n    <div class=\"left-area\">\n      <div class=\"policy-text\">\n        <span>{{ $t('_carPolicy.carPolicies') }}</span> <span>/</span>\n        <h1>{{ getBreadCrumbTitle() }}</h1>\n      </div>\n      <div class=\"save-policy\">\n        <Button\n          :text=\"$t('_generalTerms.save')\"\n          buttonType=\"dark\"\n          :class=\"{ disabled: !fileDetails['fileName'] }\"\n          @onClick=\"publishCarPolicy\"\n        />\n        <Button :text=\"$t('_generalTerms.cancel')\" buttonType=\"light\" @onClick=\"discardChanges\" />\n        <Button\n          v-if=\"route.params.id\"\n          :text=\"$t('_generalTerms.delete')\"\n          buttonType=\"light delete-button\"\n          @onClick=\"deleteCarPolicy\"\n        />\n      </div>\n    </div>\n    <div class=\"center-area\">\n      <span v-if=\"deleteCarPolicyResponse\" class=\"error-message delete-error\">\n        {{ $t('_carPolicy.CannotDeleteCarPolicy') }}*\n      </span>\n      <div class=\"car-policy-steps\">\n        <toggleableContent\n          :isSectionOpen=\"sectionToggleValues['value'][0]\"\n          :sectionIndex=\"0\"\n          @toggleSection=\"toggleSection\"\n          id=\"infoSection\"\n          :showError=\"Object.getOwnPropertyNames(errors).length > 0\"\n        >\n          <template v-slot:header> {{ $t('_carPolicy.generalInformation') }} </template>\n          <div class=\"general-infomation step\">\n            <div class=\"half-width\">\n              <InputElement type=\"text\" :value=\"carPolicyTitle\" @update:value=\"onInput\">{{\n                $t('_carPolicy.carPolicyTitle')\n              }}</InputElement>\n              <span class=\"error-message\" v-if=\"errors.titleRequiredError\">\n                {{ $t('_errorCodes.requiredError') }}\n              </span>\n              <span class=\"error-message\" v-if=\"errors.titleLengthError\">\n                {{ $t('_errorCodes.titleLengthError') }}\n              </span>\n            </div>\n            <div class=\"half-width\">\n              <label>{{ $t('_carPolicy.colorCode') }}</label>\n              <Dropdown\n                type=\"carPolicy\"\n                :items=\"colorCodes\"\n                :selectedOption=\"selectedColorCode\"\n                @onChange=\"selectColorCode\"\n              />\n            </div>\n          </div>\n          <div class=\"next-block\">\n            <Button :text=\"$t('_generalTerms.next')\" @onClick=\"goToNext('step1', 0)\" buttonType=\"dark arrow--right\" />\n          </div>\n        </toggleableContent>\n\n        <toggleableContent\n          :isSectionOpen=\"sectionToggleValues['value'][1]\"\n          :sectionIndex=\"1\"\n          @toggleSection=\"toggleSection\"\n          id=\"fuelSection\"\n          :showError=\"FuelTypeError == 'required' || checkAddChargingFacility()\"\n        >\n          <template v-slot:header> {{ $t('_carPolicy.fuelType') }} </template>\n          <div class=\"fuel-types step\">\n            <h3>{{ $t('_carPolicy.selectFuelTypes') }}</h3>\n            <div class=\"error-wrap\" v-if=\"FuelTypeError == 'required'\">\n              <span class=\"error-message\">{{ $t('_errorCodes.fuelTypeError') }}</span>\n            </div>\n            <fuel-type\n              :checkboxesValues=\"checkboxesValues\"\n              :selectedElectricOption=\"selectedElectricOption\"\n              :selectedHybridOption=\"selectedHybridOption\"\n              :isMileageDuration=\"true\"\n              @onCheck=\"onCheck\"\n              @selectElectricOption=\"selectElectricOption\"\n              @selectHybridOption=\"selectHybridOption\"\n              :selectedMileageOption=\"selectedMileageOption\"\n              :selectedDurationOption=\"selectedDurationOption\"\n              @selectMileageOption=\"selectMileageOption\"\n              @selectDurationOption=\"selectDurationOption\"\n              :chargingMandatoryOptions=\"chargingMandatoryOptions\"\n              @selectMandatoryOptions=\"selectMandatoryOptions\"\n              class=\"content-wrap\"\n            >\n            </fuel-type>\n            <AddChargingFacilities\n              v-if=\"isChargingMandatory\"\n              :facility=\"chargingFacility.value\"\n              @add=\"addFacility\"\n              @delete=\"deleteFacility\"\n              @onNameInput=\"onNameInput\"\n              @onPriceInput=\"onPriceInput\"\n              :step2Errors=\"step2Errors\"\n              type=\"chargingFacility\"\n              class=\"charging-facility facility-wrap\"\n            >\n              <h3>{{ $t('_carPolicy.enterChargingFacilities') }}</h3>\n            </AddChargingFacilities>\n            <div class=\"next-block\">\n              <Button :text=\"$t('_generalTerms.next')\" @onClick=\"goToNext('step2', 1)\" buttonType=\"dark arrow--right\" />\n            </div>\n          </div>\n        </toggleableContent>\n        <toggleableContent\n          :isSectionOpen=\"sectionToggleValues['value'][2]\"\n          :sectionIndex=\"2\"\n          @toggleSection=\"toggleSection\"\n          id=\"bodyTypeSection\"\n          :showError=\"bodyTypeError == 'required'\"\n        >\n          <template v-slot:header> {{ $t('_carPolicy.carBodyType') }} </template>\n          <div class=\"body-type step\">\n            <h3>{{ $t('_carPolicy.selectBodyTypes') }}</h3>\n            <div class=\"error-wrap\" v-if=\"bodyTypeError == 'required'\">\n              <span class=\"error-message\">{{ $t('_errorCodes.bodyTypeError') }}</span>\n            </div>\n            <CarBodyType\n              class=\"content-wrap\"\n              :checkboxesValues=\"checkboxesStep3\"\n              @onCarBodyCheck=\"onCarBodyCheck\"\n            ></CarBodyType>\n            <div class=\"next-block\">\n              <Button :text=\"$t('_generalTerms.next')\" @onClick=\"goToNext('step3', 2)\" buttonType=\"dark arrow--right\" />\n            </div>\n          </div>\n        </toggleableContent>\n        <toggleableContent\n          :isSectionOpen=\"sectionToggleValues['value'][3]\"\n          :sectionIndex=\"3\"\n          @toggleSection=\"toggleSection\"\n          id=\"amountOfDoors\"\n        >\n          <template v-slot:header> {{ $t('_carPolicy.doorsAmount') }} </template>\n          <div class=\"door-amount step\">\n            <h3>{{ $t('_carPolicy.allowedDoorCount') }}</h3>\n            <div class=\"slider-wrapper content-wrap\">\n              <vue-slider\n                ref=\"slider\"\n                v-model=\"sliderValue\"\n                :vData=\"sliderData.value\"\n                v-bind=\"sliderDataOptions\"\n                direction=\"rtl\"\n                tooltip=\"always\"\n              >\n                <template v-slot:tooltip=\"{ value }\">\n                  <div class=\"vue-slider-dot-tooltip-inner\">\n                    <span v-if=\"value == 2\" class=\"first-index vue-slider-dot-tooltip-text\"\n                      >{{ value }} {{ $t('_wizard.step9.doors') }}</span\n                    >\n                    <span v-else-if=\"value == 5\" class=\"last-index vue-slider-dot-tooltip-text\"\n                      >{{ value }} {{ $t('_wizard.step9.doors') }}</span\n                    >\n                    <span v-else class=\"vue-slider-dot-tooltip-text\">{{ value }} {{ $t('_wizard.step9.doors') }}</span>\n                  </div>\n                </template>\n              </vue-slider>\n            </div>\n            <div class=\"next-block\">\n              <Button :text=\"$t('_generalTerms.next')\" @onClick=\"goToNext('step4', 3)\" buttonType=\"dark arrow--right\" />\n            </div>\n          </div>\n        </toggleableContent>\n        <toggleableContent\n          :isSectionOpen=\"sectionToggleValues['value'][4]\"\n          :sectionIndex=\"4\"\n          @toggleSection=\"toggleSection\"\n          id=\"carBrandsModels\"\n        >\n          <template v-slot:header> {{ $t('_carPolicy.carBrandsModels') }} </template>\n          <div class=\"car-brands step\">\n            <h3>{{ $t('_carPolicy.selectBrandsModels') }}</h3>\n            <CarBrandsModels\n              class=\"content-wrap\"\n              @selectCarPolicyBrand=\"selectCarPolicyBrand\"\n              @selectModel=\"selectModel\"\n              @removeModel=\"removeModel\"\n              @addCarBrand=\"addCarBrand\"\n              @removeAllModels=\"removeAllModels\"\n              @deleteCarBrand=\"deleteCarBrand\"\n              :getBrands=\"getBrands\"\n              :brandModelsArray=\"brandModelsArray.value\"\n              :models=\"models\"\n              :showPolicyBrandsModels=\"showPolicyBrandsModels\"\n            >\n            </CarBrandsModels>\n            <div class=\"next-block\">\n              <Button\n                :text=\"$t('_generalTerms.next')\"\n                @onClick=\"goToNext('car-brands', 4)\"\n                buttonType=\"dark arrow--right\"\n              />\n            </div>\n          </div>\n        </toggleableContent>\n        <toggleableContent\n          :isSectionOpen=\"sectionToggleValues['value'][5]\"\n          :sectionIndex=\"5\"\n          @toggleSection=\"toggleSection\"\n          id=\"mandatoryAccessories\"\n        >\n          <template v-slot:header> {{ $t('_carPolicy.mandatoryAccessoriesHeading') }} </template>\n          <div class=\"mandatory-acess step\">\n            <AddChargingFacilities\n              :mandatoryAccessories=\"mandatoryAccessories.value\"\n              @add=\"addFacility\"\n              @delete=\"deleteFacility\"\n              @onNameInput=\"onNameInput\"\n              @onPriceInput=\"onPriceInput\"\n              :step2Errors=\"mandatoryAccessoriesErrors\"\n              type=\"mandatoryAccessories\"\n              class=\"facility-wrap\"\n            >\n              <h3>{{ $t('_carPolicy.addMandatoryForEmployees') }}</h3>\n            </AddChargingFacilities>\n          </div>\n          <div class=\"next-block\">\n            <Button\n              :text=\"$t('_generalTerms.next')\"\n              @onClick=\"goToNext('mandatory-accessories', 5)\"\n              buttonType=\"dark arrow--right\"\n            />\n          </div>\n        </toggleableContent>\n        <toggleableContent\n          :isSectionOpen=\"sectionToggleValues['value'][6]\"\n          :sectionIndex=\"6\"\n          @toggleSection=\"toggleSection\"\n          id=\"factoryOptionsSection\"\n        >\n          <template v-slot:header> {{ $t('_carPolicy.mandatoryFactoryOptions') }} </template>\n          <div class=\"factory-options step\">\n            <h3>{{ $t('_carPolicy.selectMandatoryFactoryOptions') }}</h3>\n            <div class=\"content-wrap\">\n              <div v-for=\"(item, index) in factoryOptionsCheckboxes\" :key=\"index\" class=\"options\">\n                <Checkbox\n                  :item=\"item\"\n                  @onCheck=\"onFactoryCheck($event, item.title)\"\n                  :isChecked=\"item.isActive\"\n                  theme=\"wizards\"\n                >\n                  {{ $t(item['value']) }}\n                  <template v-if=\"item.wizardInfo\" v-slot:wizardInfo>\n                    <i class=\"info-icon\" />\n                  </template>\n                </Checkbox>\n              </div>\n            </div>\n            <h3 class=\"colors-heading\">{{ $t('_carPolicy.colorsToExclude') }}</h3>\n            <div class=\"colors-wrap\">\n              <div v-for=\"(item, index) in carColors\" :key=\"index\" class=\"options\">\n                <Checkbox\n                  :item=\"{ id: index, value: item }\"\n                  @onCheck=\"onCarColorsCheck($event)\"\n                  :isChecked=\"excludedColorsArray.value.includes(item)\"\n                  theme=\"wizards\"\n                >\n                  {{ $t(`_carPolicy.${item}`) }}\n                </Checkbox>\n              </div>\n            </div>\n          </div>\n          <div class=\"next-block\">\n            <Button\n              :text=\"$t('_generalTerms.next')\"\n              @onClick=\"goToNext('factoryOptionsStep', 6)\"\n              buttonType=\"dark arrow--right\"\n            />\n          </div>\n        </toggleableContent>\n        <toggleableContent\n          :isSectionOpen=\"sectionToggleValues['value'][7]\"\n          :sectionIndex=\"7\"\n          @toggleSection=\"toggleSection\"\n          id=\"uploadDocumentSection\"\n        >\n          <template v-slot:header> {{ $t('_carPolicy.carPolicyDocument') }} </template>\n          <div class=\"policy-document step\">\n            <h3>{{ $t('_carPolicy.uploadCarPolicyDocument') }}</h3>\n            <div class=\"error-wrap\">\n              <span v-if=\"documentResponse\" class=\"error-message\">\n                {{ $t(`_errorCodes.${documentResponse}`) }}\n              </span>\n            </div>\n            <UploadDocument\n              class=\"content-wrap\"\n              :fileDetails=\"fileDetails\"\n              @fileChange=\"fileChange\"\n              @deleteFile=\"deleteFile\"\n            />\n            <div class=\"next-block\">\n              <Button\n                :class=\"{ disable: !fileDetails['fileName'] }\"\n                :text=\"$route.params.id ? $t('_carPolicy.updateCarPolicy') : $t('_carPolicy.publishCarPolicy')\"\n                @onClick=\"publishCarPolicy\"\n                buttonType=\"dark arrow--right\"\n              />\n            </div>\n          </div>\n        </toggleableContent>\n      </div>\n    </div>\n  </div>\n  <div class=\"loader-block\" v-else>\n    <Loader />\n  </div>\n  <Popup v-if=\"showPopup\" @onClick=\"closePopup\" @onProceed=\"onProceed\">\n    <div class=\"title h3\">{{ $t('_warningPopup.confirmDelete') }}</div>\n    <div class=\"text t2\">{{ $t('_warningPopup.dataLost') }}</div>\n  </Popup>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, computed, onMounted, watch, onUnmounted } from 'vue'\nimport Button from '@/components/UI/Button.vue'\nimport toggleableContent from '@/components/toggleableContent.vue'\nimport InputElement from '@/components/UI/Input.vue'\nimport Dropdown from '@/components/UI/Dropdown.vue'\nimport FuelType from '@/components/FuelType.vue'\nimport AddChargingFacilities from '@/components/AddChargingFacilities.vue'\nimport CarBodyType from '@/components/CarBodyType.vue'\nimport Checkbox from '@/components/UI/Checkbox.vue'\nimport CarBrandsModels from '@/components/CarBrandsModels.vue'\nimport UploadDocument from '@/components/UI/UploadDocument.vue'\nimport generalInfo from '@/composables/PolicyGeneralInfo'\nimport PolicyFuelType from '@/composables/PolicyFuelType'\nimport BodyType from '@/composables/PolicyBodyType'\nimport PolicyFactoryOptions from '@/composables/PolicyFactoryOptions'\nimport PolicyBrandsModels from '@/composables/PolicyBrandsModels'\nimport uploadDocument from '@/composables/PolicyUploadDocument'\nimport doorCount from '@/composables/PolicyDoorCount'\nimport VueSlider from 'vue-slider-component'\nimport Popup from '@/components/Popup.vue'\nimport { useStore } from '@/store'\nimport { carPolicyActionTypes } from '@/store/carPolicy/actions'\nimport { AuthActionTypes } from '@/store/auth/actions'\nimport { carPolicyMutationTypes } from '@/store/carPolicy/mutations'\nimport { AuthMutationTypes } from '@/store/auth/mutations'\nimport { reactive, ref } from 'vue'\nimport { useRoute } from 'vue-router'\nimport Loader from '@/components/UI/Loader.vue'\nimport { useI18n } from 'vue-i18n'\nimport router from '@/router'\nimport _ from 'lodash'\nimport MessageBar from '@/components/UI/MessageBar.vue'\nimport getCompany from '@/mixins/getCompany'\nexport default defineComponent({\n  components: {\n    Button,\n    toggleableContent,\n    InputElement,\n    Dropdown,\n    FuelType,\n    AddChargingFacilities,\n    CarBodyType,\n    Checkbox,\n    CarBrandsModels,\n    UploadDocument,\n    VueSlider,\n    Loader,\n    Popup,\n    MessageBar\n  },\n  name: 'Car policies',\n  setup() {\n    const store = useStore()\n    const route = useRoute()\n    const showPopup = ref(false)\n    const { t } = useI18n({ useScope: 'global' })\n    const carPolicyByID = computed(() => store.state.auth.carPolicyByID)\n    const carBrandsModels = computed(() => store.state.options.carBrandsModels)\n    const deleteCarPolicyResponse = computed(() => store.state.carPolicy.deleteCarPolicyResponse)\n    const documentResponse = computed(() => store.state.carPolicy.documentResponse)\n    const carColors = computed(() => store.state.carPolicy.carColors)\n    const excludedColorsArray: { value: Array<string> } = reactive({ value: [] })\n    const roles = computed(() => store.state.auth.currentUser?.roles)\n    const { compId, companyDetailState } = getCompany()\n    const closePopup = () => {\n      showPopup.value = false\n    }\n    const onProceed = () => {\n      showPopup.value = false\n      store.dispatch(carPolicyActionTypes.DELETE_CARPOLICY, {\n        companyId: compId,\n        carPolicyId: route.params.id\n      })\n    }\n    const {\n      colorCodes,\n      carPolicyTitle,\n      errors,\n      selectedColorCode,\n      selectColorCode,\n      checkStep1,\n      onInput\n    } = generalInfo()\n    const {\n      selectedMileageOption,\n      selectedDurationOption,\n      selectMileageOption,\n      selectDurationOption,\n      chargingMandatoryOptions,\n      selectMandatoryOptions,\n      isChargingMandatory,\n      chargingFacility,\n      addFacility,\n      onNameInput,\n      onPriceInput,\n      deleteFacility,\n      step2Errors,\n      FuelTypeError,\n      selectElectricOption,\n      selectHybridOption,\n      onCheck,\n      checkboxesValues,\n      selectedElectricOption,\n      selectedHybridOption,\n      mandatoryAccessories,\n      mandatoryAccessoriesErrors,\n      fuelTypeArray,\n      convertToNumberAndFloat,\n      checkChargingFacility,\n      checkAddChargingFacility\n    } = PolicyFuelType()\n    const { checkboxesStep3, bodyTypeError, onCarBodyCheck, bodyTypeArray } = BodyType()\n    const { factoryOptionsCheckboxes, onFactoryCheck, factoryOptionsArray } = PolicyFactoryOptions()\n    const {\n      models,\n      brandModelsArray,\n      selectModel,\n      removeModel,\n      addCarBrand,\n      removeAllModels,\n      deleteCarBrand,\n      getBrands,\n      showPolicyBrandsModels,\n      selectCarPolicyBrand\n    } = PolicyBrandsModels()\n    const { fileDetails, fileChange } = uploadDocument()\n    const { sliderValue, sliderDataOptions, sliderData } = doorCount()\n    const sectionsErrors = reactive({})\n    const sectionToggleValues = reactive({ value: [true, false, false, false, false, false, false, false] })\n    const loader = computed(() => store.state.carPolicy.loader)\n    const onCarColorsCheck = ($event) => {\n      if (excludedColorsArray.value.indexOf($event.target.value) === -1) {\n        excludedColorsArray.value.push($event.target.value)\n      }\n      if (!$event.target.checked) {\n        excludedColorsArray.value.splice(excludedColorsArray.value.indexOf($event.target.value), 1)\n      }\n    }\n    const initialize = async () => {\n      await store.dispatch(AuthActionTypes.GET_CARPOLICY_BY_ID, {\n        companyId: compId,\n        carPolicyId: route.params.id\n      })\n      carPolicyTitle.value = carPolicyByID.value.policyTitle\n      selectedColorCode.value = carPolicyByID.value.colorCode\n      // carBodyTyoe\n      checkboxesStep3.forEach((item) => {\n        item.isActive = carPolicyByID.value.carBodyType.includes(item.value)\n      })\n      bodyTypeArray.value = carPolicyByID.value.carBodyType\n      // AmountOfDoors\n      const minDoors = parseInt(`${carPolicyByID.value.amountOfDoors.min}`)\n      sliderValue.value = minDoors\n      // mandatory factory\n      factoryOptionsCheckboxes.forEach((item) => {\n        item.isActive = carPolicyByID.value.mandatoryFactoryOptions.includes(item.title)\n      })\n      factoryOptionsArray.value = carPolicyByID.value.mandatoryFactoryOptions\n      // document\n      fileDetails['fileName'] = carPolicyByID.value.document\n      // fuel type\n      const getIndexOfItem = (selectedTitle) => {\n        return checkboxesValues.findIndex((item) => item.title === selectedTitle)\n      }\n      checkboxesValues.forEach((item) => {\n        carPolicyByID.value.fuelType.forEach((policyTitle) => {\n          if (policyTitle.title == 'plug_in_hybrid') {\n            policyTitle.title = 'plug-in hybrid'\n          }\n          if (item.title == policyTitle.title) {\n            item.isActive = true\n            selectedMileageOption[getIndexOfItem(item.title)] = policyTitle.setMileage + ' km'\n            selectedDurationOption[getIndexOfItem(item.title)] = policyTitle.setDuration.toString()\n            if (item.title == 'electric') {\n              let policyDistance = policyTitle.distance.toString()\n              if (policyDistance == '1000') {\n                policyDistance = '> 1000 km'\n              } else if (policyDistance == '0') {\n                policyDistance = '< 100 km'\n              } else {\n                policyDistance = policyDistance + ' km'\n              }\n              selectedElectricOption.value = policyDistance\n              chargingMandatoryOptions[getIndexOfItem('electric')] = policyTitle.isChargingMandatory == 1 ? true : false\n            } else if (item.title == 'plug-in hybrid') {\n              let policyDistance = policyTitle.distance.toString()\n              if (policyDistance == '200') {\n                policyDistance = '> 200 km'\n              } else if (policyDistance == '0') {\n                policyDistance = '< 50 km'\n              } else {\n                policyDistance = policyDistance + ' km'\n              }\n              selectedHybridOption.value = policyDistance\n              chargingMandatoryOptions[getIndexOfItem('plug-in hybrid')] =\n                policyTitle.isChargingMandatory == 1 ? true : false\n            }\n          }\n        })\n      })\n      fuelTypeArray.value = carPolicyByID.value.fuelType\n      // charging facilities\n      Array.prototype.unshift.apply(chargingFacility.value, carPolicyByID.value.chargingFacility)\n      // mandatory facilities\n      mandatoryAccessories.value.unshift(...carPolicyByID.value.mandatoryAccessories)\n      for (let i = 0; i < carPolicyByID.value.mandatoryAccessories.length; i++) {\n        mandatoryAccessoriesErrors.unshift({\n          facilityError: '',\n          priceError: ''\n        })\n      }\n      // Car brands models\n      if (carPolicyByID.value.carBrandsAndModels.length > 0) {\n        showPolicyBrandsModels.value = true\n      }\n      brandModelsArray.value = carPolicyByID.value.carBrandsAndModels\n      // carColors\n      excludedColorsArray.value = carPolicyByID.value.excludedCarColors ?? []\n    }\n    watch(\n      () => _.cloneDeep(carBrandsModels.value),\n      () => {\n        brandModelsArray.value.forEach((item, index) => {\n          if (item.brand) {\n            const brandName = { item: item.brand, key: index }\n            selectCarPolicyBrand(brandName)\n          }\n        })\n      }\n    )\n    onMounted(async () => {\n      if (route.params.id) {\n        await initialize()\n      } else {\n        store.commit(AuthMutationTypes.SET_CARPOLICYBYID, {})\n      }\n      await store.dispatch(carPolicyActionTypes.GET_CAR_COLORS)\n    })\n    const toggleSection = (index) => {\n      const closeAllOther = sectionToggleValues.value.map(function (item, itemIndex) {\n        if (itemIndex === index) {\n          item = !item\n        } else {\n          item = false\n        }\n        return item\n      })\n      sectionToggleValues.value = closeAllOther\n    }\n    // goToNext\n    const validateOptions = (options, ErroField) => {\n      ErroField.value = ''\n      if (!options.some((item) => item.isActive === true)) {\n        ErroField.value = 'required'\n      } else {\n        return true\n      }\n    }\n    const scrollToSection = (sectionId) => {\n      const element = document.querySelector(`#${sectionId}`) as HTMLElement\n      element.scrollIntoView({\n        behavior: 'smooth'\n      })\n    }\n    const goToNext = (type, index) => {\n      sectionToggleValues['value'][index] = false\n      sectionToggleValues['value'][index + 1] = true\n      let sectionID = ''\n      if (type === 'step1') {\n        checkStep1()\n        sectionID = 'fuelSection'\n      } else if (type === 'step2') {\n        validateOptions(checkboxesValues, FuelTypeError)\n        if (isChargingMandatory.value) {\n          checkChargingFacility()\n        }\n        sectionID = 'bodyTypeSection'\n      } else if (type === 'step3') {\n        validateOptions(checkboxesStep3, bodyTypeError)\n        sectionID = 'amountOfDoors'\n      } else if (type === 'step4') {\n        sectionID = 'carBrandsModels'\n      } else if (type === 'car-brands') {\n        sectionID = 'mandatoryAccessories'\n      } else if (type === 'mandatory-accessories') {\n        sectionID = 'factoryOptionsSection'\n      } else if (type === 'factoryOptionsStep') {\n        sectionID = 'uploadDocumentSection'\n      }\n      setTimeout(() => {\n        scrollToSection(sectionID)\n      }, 300)\n    }\n    const validateSections = () => {\n      delete sectionsErrors['infoError']\n      delete sectionsErrors['fuelTypeError']\n      delete sectionsErrors['bodyTypeError']\n      delete sectionsErrors['chargingMandatoryFields']\n      let sectionId = ''\n      let sectionIndex = 0\n      if (!checkStep1()) {\n        sectionsErrors['infoError'] = 'required'\n        sectionId = 'infoSection'\n        sectionIndex = 0\n      }\n      if (!validateOptions(checkboxesValues, FuelTypeError)) {\n        sectionsErrors['fuelTypeError'] = 'required'\n        if (!sectionId) {\n          sectionId = 'fuelSection'\n          sectionIndex = 1\n        }\n      }\n      if (isChargingMandatory.value) {\n        if (!checkChargingFacility()) {\n          sectionsErrors['chargingMandatoryFields'] = 'required'\n          if (!sectionId) {\n            sectionId = 'fuelSection'\n            sectionIndex = 1\n          }\n        }\n      }\n      if (!validateOptions(checkboxesStep3, bodyTypeError)) {\n        sectionsErrors['bodyTypeError'] = 'required'\n        if (!sectionId) {\n          sectionId = 'bodyTypeSection'\n          sectionIndex = 2\n        }\n      }\n      if (Object.getOwnPropertyNames(sectionsErrors).length === 0) {\n        return true\n      } else {\n        sectionToggleValues['value'][sectionIndex] = true\n        scrollToSection(sectionId)\n      }\n    }\n    const getBreadCrumbTitle = () => {\n      let title = t('_carPolicy.newCarPolicy')\n      if (route.params.id) {\n        title = t('_carPolicy.editCarPolicy')\n      }\n      return title\n    }\n    const deleteFile = () => {\n      fileDetails['file'] = {}\n      fileDetails['fileName'] = ''\n      store.dispatch(carPolicyActionTypes.DELETE_CARPOLICYDOCUMENT, {\n        companyId: compId,\n        carPolicyId: carPolicyByID.value.id\n      })\n    }\n    const removeEmptyBrands = (brandsModelsArray) => {\n      const tempbrandsModelsArray = JSON.parse(JSON.stringify(brandsModelsArray))\n      tempbrandsModelsArray.forEach((item) => {\n        if (!item.brand) {\n          delete item['brand']\n          delete item['models']\n        }\n      })\n      return tempbrandsModelsArray.filter((item) => !(item && Object.keys(item).length === 0))\n    }\n    const removeType = (type) => {\n      const tempFacility = JSON.parse(JSON.stringify(type))\n      tempFacility.forEach((item) => {\n        delete item['type']\n        if ((!item['price'] && !item['chargingFacility']) || (!item['accessory'] && !item['price'])) {\n          delete item['price']\n          delete item['chargingFacility']\n          delete item['accessory']\n        }\n        if (item['price']) item['price'] = convertToNumberAndFloat(item['price'])\n      })\n      return tempFacility.filter((item) => !(item && Object.keys(item).length === 0))\n    }\n    const changeTitle = (fuelTypeArray) => {\n      const tempFuelTypeArray = JSON.parse(JSON.stringify(fuelTypeArray))\n      const getPlugHybridIndex = fuelTypeArray.findIndex((item) => item.title == 'plug-in hybrid')\n      if (getPlugHybridIndex !== -1) {\n        tempFuelTypeArray[getPlugHybridIndex].title = 'plug_in_hybrid'\n        return tempFuelTypeArray\n      } else {\n        return fuelTypeArray\n      }\n    }\n    const publishCarPolicy = () => {\n      if (validateSections()) {\n        const formData = new FormData()\n        formData.append('policyTitle', JSON.stringify(carPolicyTitle.value))\n        formData.append('colorCode', JSON.stringify(selectedColorCode.value))\n        formData.append('fuelType', JSON.stringify(changeTitle(fuelTypeArray.value)))\n        formData.append('carBodyType', JSON.stringify(bodyTypeArray.value))\n        formData.append('amountOfDoors', JSON.stringify({ min: sliderValue.value }))\n        formData.append(\n          'carBrandsAndModels',\n          JSON.stringify(showPolicyBrandsModels.value ? removeEmptyBrands(brandModelsArray.value) : [])\n        )\n        formData.append(\n          'mandatoryAccessories',\n          JSON.stringify(!mandatoryAccessories.value[0]['accessory'] ? [] : removeType(mandatoryAccessories.value))\n        )\n        formData.append('mandatoryFactoryOptions', JSON.stringify(factoryOptionsArray.value))\n        if (fileDetails['file']['name']) formData.append('document', fileDetails['file'] as File)\n        formData.append(\n          'chargingFacility',\n          JSON.stringify(isChargingMandatory.value ? removeType(chargingFacility.value) : [])\n        )\n        formData.append('excludedColors', JSON.stringify(excludedColorsArray.value))\n        if (route.params.id) {\n          formData.append('_method', 'PUT')\n          store.dispatch(carPolicyActionTypes.UPDATE_CARPOLICY, {\n            companyId: compId,\n            carPolicyId: carPolicyByID.value.id,\n            data: formData\n          })\n        } else {\n          store.dispatch(carPolicyActionTypes.ADD_CARPOLICY, {\n            companyId: compId,\n            data: formData\n          })\n        }\n      }\n    }\n    const discardChanges = () => {\n      router.push({ name: 'CarPolicyOverview' })\n    }\n    const deleteCarPolicy = () => {\n      showPopup.value = true\n    }\n    onUnmounted(() => {\n      store.commit(carPolicyMutationTypes.DELETE_CARPOLICYRESPONSE, '')\n      store.commit(carPolicyMutationTypes.SET_DOCUMENT_RESPONSE, '')\n    })\n    return {\n      colorCodes,\n      selectedColorCode,\n      selectColorCode,\n      goToNext,\n      carPolicyTitle,\n      errors,\n      onInput,\n      FuelType,\n      checkboxesValues,\n      onCheck,\n      selectElectricOption,\n      selectHybridOption,\n      selectedElectricOption,\n      selectedHybridOption,\n      selectedMileageOption,\n      selectedDurationOption,\n      selectMileageOption,\n      selectDurationOption,\n      chargingMandatoryOptions,\n      selectMandatoryOptions,\n      isChargingMandatory,\n      chargingFacility,\n      addFacility,\n      onNameInput,\n      onPriceInput,\n      deleteFacility,\n      step2Errors,\n      checkboxesStep3,\n      bodyTypeError,\n      FuelTypeError,\n      mandatoryAccessories,\n      mandatoryAccessoriesErrors,\n      factoryOptionsCheckboxes,\n      selectCarPolicyBrand,\n      models,\n      brandModelsArray,\n      selectModel,\n      removeModel,\n      addCarBrand,\n      removeAllModels,\n      deleteCarBrand,\n      showPolicyBrandsModels,\n      publishCarPolicy,\n      fileDetails,\n      fileChange,\n      deleteFile,\n      onFactoryCheck,\n      onCarBodyCheck,\n      bodyTypeArray,\n      sliderValue,\n      sliderDataOptions,\n      sliderData,\n      factoryOptionsArray,\n      convertToNumberAndFloat,\n      loader,\n      sectionToggleValues,\n      toggleSection,\n      checkChargingFacility,\n      checkAddChargingFacility,\n      carPolicyByID,\n      getBreadCrumbTitle,\n      discardChanges,\n      route,\n      showPopup,\n      closePopup,\n      onProceed,\n      deleteCarPolicy,\n      getBrands,\n      deleteCarPolicyResponse,\n      documentResponse,\n      carColors,\n      onCarColorsCheck,\n      excludedColorsArray,\n      companyDetailState,\n      roles\n    }\n  }\n})\n</script>\n<style lang=\"sass\" scoped>\n.colors-heading\n  margin: 2.3em 0 0\n.colors-wrap\n  display: flex\n  flex-wrap: wrap\n  margin: 4em 0 0\n  .options\n    flex-basis: 47%\n    &:nth-child(odd)\n      margin: 0 5% 0 0 !important;\n.delete-error\n  top: 42px\n.loader-block\n  display: flex\n  flex: 1\n  justify-content: space-around\n.charging-facility.facility-wrap\n  margin: 4em 0 0\n.facility-wrap\n  margin: 0\n  h3\n    padding: 0 0 3rem 0\n.disabled\n  pointer-events: none\n  background: $colorHubbleGreyLines !important\n  color: $colorWhite !important\n.general-infomation\n  @media screen and (max-width: $mdBreakpoint - 1)\n    flex-direction: column\n    .half-width\n      &:first-child\n        margin-right: 0 !important\n        margin-bottom: 5em\n  .half-width\n    &:first-child\n      margin-right: 3em\n.content-wrap\n  margin-top: 5em\n.car-policy-wrap\n  display: flex\n  flex: 1\n  position: relative\n  @media screen and (max-width: $xxlBreakpoint)\n    flex-direction: column\n    padding: 0 15px\n  .left-area\n    position: absolute\n    left: 0\n    @media screen and (max-width: $xxlBreakpoint)\n      position: relative\n      margin: 2em 0 0\n    .policy-text\n      display: flex\n      align-items: center\n      @media screen and (max-width: $mdBreakpoint - 1)\n        h1\n          font-size: 14px\n      span\n        font-family: 'Lato-semibold'\n        font-size: 15px\n        margin-right: 0.8em\n      span, h1\n        color: $colorHubble\n    .save-policy\n      margin: 2em 0 0\n      @media screen and (max-width: $mdBreakpoint - 1)\n        button\n          font-size: 12px\n      button.dark\n        padding: 0.9em 1.4em\n      button.light\n        padding: 0.9em 1.4em\n        margin-top: 0.7em\n  .center-area\n    display: flex\n    max-width: 970px\n    margin: auto\n    width: 100%\n    position: relative\n    .car-policy-steps\n      display: flex\n      flex: 1\n      flex-direction: column\n      margin: 7.5em 0 18em\n      background: $colorWhite\n      box-shadow: 1px 1px 10px rgba(44, 0, 171, 0.2)\n      position: relative\n      .general-infomation\n        label\n          font-size: 1.6em\n          color: $colorHubbleDarkGrey\n          display: flex\n          margin-bottom: 0.4em\n      .step\n        max-width: 670px\n        margin: auto\n        width: 100%\n        display: flex\n        margin-top: 3.1em\n        box-sizing: border-box\n        padding: 0 15px\n        @media screen and (max-width: $mdBreakpoint - 1)\n          flex-direction: column\n        h3\n          text-align: center\n          width: 100%\n        .half-width\n          width: 50%\n          position: relative\n          display: flex\n          flex-direction: column\n          @media screen and (max-width: $mdBreakpoint - 1)\n            width: 100%\n            height: 48px\n            &:first-child\n              margin-bottom: 4em\n      .next-block\n        margin: 3.6em 0 5em\n        display: flex\n        justify-content: center\n      .fuel-types\n        display: flex\n        flex-direction: column\n      .body-type, .door-amount\n        flex-direction: column\n      .error-wrap\n        text-align: center\n        position: relative\n        .error-message\n          left: 0\n          right: 0\n          margin: auto\n      .factory-options\n        flex-direction: column\n        .options\n          margin: 0 0 1em 0\n      .car-brands,  .policy-document\n        flex-direction: column\n      .policy-document\n        button.disable\n          background-color: $colorHubbleGreyLines\n          pointer-events: none\n</style>\n<style lang=\"sass\">\n@import '~vue-slider-component/lib/theme/default.scss'\n</style>\n"]}]}