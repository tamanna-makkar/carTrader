{"remainingRequest":"/home/tamanna/htdocs/carconfiguratorfrontend/node_modules/babel-loader/lib/index.js!/home/tamanna/htdocs/carconfiguratorfrontend/node_modules/ts-loader/index.js??ref--14-2!/home/tamanna/htdocs/carconfiguratorfrontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/tamanna/htdocs/carconfiguratorfrontend/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/tamanna/htdocs/carconfiguratorfrontend/src/views/Step3.vue?vue&type=script&lang=ts","dependencies":[{"path":"/home/tamanna/htdocs/carconfiguratorfrontend/src/views/Step3.vue","mtime":1691610165540},{"path":"/home/tamanna/htdocs/carconfiguratorfrontend/node_modules/cache-loader/dist/cjs.js","mtime":1691610247617},{"path":"/home/tamanna/htdocs/carconfiguratorfrontend/node_modules/babel-loader/lib/index.js","mtime":1691610247572},{"path":"/home/tamanna/htdocs/carconfiguratorfrontend/node_modules/ts-loader/index.js","mtime":1691610259533},{"path":"/home/tamanna/htdocs/carconfiguratorfrontend/node_modules/cache-loader/dist/cjs.js","mtime":1691610247617},{"path":"/home/tamanna/htdocs/carconfiguratorfrontend/node_modules/vue-loader-v16/dist/index.js","mtime":1691610261934}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZXZlcnkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mbGF0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluZGV4LW9mLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29tZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnVuc2NvcGFibGVzLmZsYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZW50cmllcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnNldC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5tYXRjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgX3RvQ29uc3VtYWJsZUFycmF5IGZyb20gIi9ob21lL3RhbWFubmEvaHRkb2NzL2NhcmNvbmZpZ3VyYXRvcmZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheSI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3RhbWFubmEvaHRkb2NzL2NhcmNvbmZpZ3VyYXRvcmZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IHsgZGVmaW5lQ29tcG9uZW50LCBjb21wdXRlZCwgb25Nb3VudGVkIH0gZnJvbSAndnVlJzsKaW1wb3J0IHRvZ2dsZWFibGVDb250ZW50IGZyb20gJ0AvY29tcG9uZW50cy90b2dnbGVhYmxlQ29udGVudC52dWUnOwppbXBvcnQgUmFkaW9CdXR0b24gZnJvbSAnQC9jb21wb25lbnRzL1VJL1JhZGlvQnV0dG9uLnZ1ZSc7CmltcG9ydCBmb3JtYXRDdXJyZW5jeSBmcm9tICdAL2ZpbHRlcnMvQ3VycmVuY3lGb3JtYXQnOwppbXBvcnQgQnV0dG9uIGZyb20gJ0AvY29tcG9uZW50cy9VSS9CdXR0b24udnVlJzsKaW1wb3J0IEJhY2tCdXR0b24gZnJvbSAnQC9jb21wb25lbnRzL1VJL0JhY2tCdXR0b24udnVlJzsKaW1wb3J0IE9wdGlvbnNDaGVja2JveGVzIGZyb20gJ0AvY29tcG9uZW50cy9VSS9PcHRpb25zQ2hlY2tib3hlcy52dWUnOwppbXBvcnQgTG9hZGVyIGZyb20gJ0AvY29tcG9uZW50cy9VSS9Mb2FkZXIudnVlJzsKaW1wb3J0IHsgVnVlQ29va2llTmV4dCB9IGZyb20gJ3Z1ZS1jb29raWUtbmV4dCc7CmltcG9ydCB7IEF1dGhBY3Rpb25UeXBlcyB9IGZyb20gJ0Avc3RvcmUvYXV0aC9hY3Rpb25zJzsKaW1wb3J0IHsgQWN0aW9uVHlwZXMgfSBmcm9tICdAL3N0b3JlL29wdGlvbnMvYWN0aW9ucyc7CmltcG9ydCB7IE11dGF0aW9uVHlwZXMgfSBmcm9tICdAL3N0b3JlL29wdGlvbnMvbXV0YXRpb25zJzsKaW1wb3J0IHsgdXNlU3RvcmUgfSBmcm9tICdAL3N0b3JlJzsKaW1wb3J0IHsgcmVhY3RpdmUsIHdhdGNoLCByZWYgfSBmcm9tICd2dWUnOwppbXBvcnQgeyB1c2VSb3V0ZSB9IGZyb20gJ3Z1ZS1yb3V0ZXInOwppbXBvcnQgXyBmcm9tICdsb2Rhc2gnOwppbXBvcnQgUG9wdXAgZnJvbSAnQC9jb21wb25lbnRzL1BvcHVwLnZ1ZSc7CmltcG9ydCBBZGRDaGFyZ2luZ0ZhY2lsaXRpZXMgZnJvbSAnQC9jb21wb25lbnRzL0FkZENoYXJnaW5nRmFjaWxpdGllcy52dWUnOwppbXBvcnQgRHJvcGRvd24gZnJvbSAnQC9jb21wb25lbnRzL1VJL0Ryb3Bkb3duLnZ1ZSc7CmltcG9ydCB7IHVzZUkxOG4gfSBmcm9tICd2dWUtaTE4bic7CmltcG9ydCB7IFVTRVJfU1RBVFVTIH0gZnJvbSAnQC9jb21wb3NhYmxlcy9zdGF0aWNWYWx1ZXMnOwppbXBvcnQgdG9Mb3dlckNhc2UgZnJvbSAnQC9maWx0ZXJzL3RvTG93ZXJDYXNlJzsKZXhwb3J0IGRlZmF1bHQgZGVmaW5lQ29tcG9uZW50KHsKICBjb21wb25lbnRzOiB7CiAgICB0b2dnbGVhYmxlQ29udGVudDogdG9nZ2xlYWJsZUNvbnRlbnQsCiAgICBSYWRpb0J1dHRvbjogUmFkaW9CdXR0b24sCiAgICBCdXR0b246IEJ1dHRvbiwKICAgIEJhY2tCdXR0b246IEJhY2tCdXR0b24sCiAgICBPcHRpb25zQ2hlY2tib3hlczogT3B0aW9uc0NoZWNrYm94ZXMsCiAgICBMb2FkZXI6IExvYWRlciwKICAgIFBvcHVwOiBQb3B1cCwKICAgIEFkZENoYXJnaW5nRmFjaWxpdGllczogQWRkQ2hhcmdpbmdGYWNpbGl0aWVzLAogICAgRHJvcGRvd246IERyb3Bkb3duCiAgfSwKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAoKSB7CiAgICB2YXIgc3RvcmUgPSB1c2VTdG9yZSgpOwogICAgdmFyIHJvdXRlID0gdXNlUm91dGUoKTsKICAgIHZhciBjb21wb25lbnRLZXkgPSByZWYoMCk7CiAgICB2YXIgcmVxdWlyZWRDaG9pY2VJbmRleCA9IHJlZigwKTsKICAgIHZhciBzaG93UG9wdXAgPSByZWYoZmFsc2UpOwogICAgdmFyIHNob3dDYXJPcmRlclBvcHVwID0gcmVmKGZhbHNlKTsKICAgIHZhciBzZWxlY3RlZENoZWNrYm94ID0gcmVmKCcnKTsKICAgIHZhciBwYWNrTWVtYmVycyA9IHJlZigpOwogICAgdmFyIHVwZGF0ZUNhck9yZGVyVmFsdWUgPSByZWYoMSk7CiAgICB2YXIgY2FyT3JkZXJTdGF0dXMgPSByZWYoMCk7CiAgICB2YXIgaXNFeHBlbnNpdmVGbGFnID0gcmVmKHRydWUpOwogICAgdmFyIHNob3dDb25mbGljdGVkT3B0aW9uc1BvcHVwID0gcmVmKGZhbHNlKTsKICAgIHZhciBzaG93Q29uZmxpY3RlZE5lc3RlZE9wdGlvbnNQb3B1cCA9IHJlZihmYWxzZSk7CgogICAgdmFyIF91c2VJMThuID0gdXNlSTE4bih7CiAgICAgIHVzZVNjb3BlOiAnZ2xvYmFsJwogICAgfSksCiAgICAgICAgdCA9IF91c2VJMThuLnQ7CgogICAgdmFyIHBhY2tNZW1iZXJzUG9wVXBUaXRsZSA9IHJlZih0KCdfc3RlcDMuaXRlbXNBZGRlZCcpKTsKICAgIHZhciBvcHRpb25zUmVzcG9uc2UgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBzdG9yZS5zdGF0ZS5vcHRpb25zLm9wdGlvbnNSZXNwb25zZTsKICAgIH0pOwogICAgdmFyIG9wdGlvbnNSZXNwb25zZUFzT2JqZWN0ID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gc3RvcmUuc3RhdGUub3B0aW9ucy5vcHRpb25zUmVzcG9uc2VBc09iamVjdDsKICAgIH0pOwogICAgdmFyIG5lc3RlZE9wdGlvbnMgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBzdG9yZS5zdGF0ZS5vcHRpb25zLm5lc3RlZE9wdGlvbnM7CiAgICB9KTsKICAgIHZhciBzdGF0ZVZlaGljbGVJZCA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHN0b3JlLnN0YXRlLm9wdGlvbnMudmVoaWNsZUlkOwogICAgfSk7CiAgICB2YXIgZXh0ZXJpb3JJbnRlcmlvciA9IHJlYWN0aXZlKHsKICAgICAgZXh0ZXJpb3JPcHRpb25DOiBbXSwKICAgICAgZXh0ZXJpb3JPcHRpb25POiBbXSwKICAgICAgaW50ZXJpb3JPcHRpb25DOiBbXSwKICAgICAgaW50ZXJpb3JPcHRpb25POiBbXQogICAgfSk7CiAgICB2YXIgb3RoZXJzID0gcmVhY3RpdmUoewogICAgICB2YWx1ZTogW3sKICAgICAgICBhY2Nlc3Nvcnk6ICcnLAogICAgICAgIHByaWNlOiAnJywKICAgICAgICB0eXBlOiAnYWRkJwogICAgICB9XQogICAgfSk7CgogICAgdmFyIGNvbnZlcnRUb051bWJlckFuZEZsb2F0ID0gZnVuY3Rpb24gY29udmVydFRvTnVtYmVyQW5kRmxvYXQoc2VsZWN0ZWRPcHRpb24pIHsKICAgICAgcmV0dXJuIHNlbGVjdGVkT3B0aW9uLnJlcGxhY2UoLywvZywgJy4nKTsKICAgIH07CgogICAgdmFyIHJlbW92ZVR5cGUgPSBmdW5jdGlvbiByZW1vdmVUeXBlKHR5cGUpIHsKICAgICAgdmFyIHRlbXBGYWNpbGl0eSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodHlwZSkpOwogICAgICB0ZW1wRmFjaWxpdHkuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIGRlbGV0ZSBpdGVtWyd0eXBlJ107CgogICAgICAgIGlmICghaXRlbS5hY2Nlc3NvcnkgfHwgIWl0ZW0ucHJpY2UpIHsKICAgICAgICAgIGRlbGV0ZSBpdGVtWydhY2Nlc3NvcnknXTsKICAgICAgICAgIGRlbGV0ZSBpdGVtWydwcmljZSddOwogICAgICAgIH0KCiAgICAgICAgaWYgKGl0ZW1bJ3ByaWNlJ10pIGl0ZW1bJ3ByaWNlJ10gPSBjb252ZXJ0VG9OdW1iZXJBbmRGbG9hdChpdGVtWydwcmljZSddKTsKICAgICAgfSk7CiAgICAgIHJldHVybiB0ZW1wRmFjaWxpdHkuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuICEoaXRlbSAmJiBPYmplY3Qua2V5cyhpdGVtKS5sZW5ndGggPT09IDApOwogICAgICB9KTsKICAgIH07CgogICAgdmFyIHNob3dDb21wbHlQb3B1cCA9IHJlZihmYWxzZSk7CgogICAgdmFyIGNsb3NlQ29tcGx5UG9wdXAgPSBmdW5jdGlvbiBjbG9zZUNvbXBseVBvcHVwKCkgewogICAgICBzaG93Q29tcGx5UG9wdXAudmFsdWUgPSBmYWxzZTsKICAgIH07CgogICAgdmFyIGNsb3NlQ2FyT3JkZXJQb3B1cCA9IGZ1bmN0aW9uIGNsb3NlQ2FyT3JkZXJQb3B1cCgpIHsKICAgICAgc2hvd0Nhck9yZGVyUG9wdXAudmFsdWUgPSBmYWxzZTsKICAgIH07CgogICAgdmFyIHNlbGVjdGVkT3B0aW9ucyA9IFtdOwogICAgdmFyIG9wdGlvbnNDb25maWd1cmF0aW9uRGF0YSA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ29wdGlvbnNDb25maWd1cmF0aW9uRGF0YScpID8gSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdvcHRpb25zQ29uZmlndXJhdGlvbkRhdGEnKSB8fCAne30nKSA6IHsKICAgICAgc2VsZWN0ZWRPcHRpb25zOiBzZWxlY3RlZE9wdGlvbnMsCiAgICAgIHJlcXVpcmVkQ2hvaWNlczogW10sCiAgICAgIG9wdGlvbjogJycsCiAgICAgIGFjdGlvbjogJycsCiAgICAgIG90aGVyQWNjZXNzb3JpZXM6IFtdLAogICAgICBjaGFyZ2luZ0ZhY2lsaXRpZXM6IFtdLAogICAgICB1c2VyU2VsZWN0ZWRPcHRpb25zOiBbXQogICAgfTsKICAgIHZhciBpc0NvbG9yc1BvcHVwID0gcmVmKGZhbHNlKTsKCiAgICB2YXIgaW5pdGlhbGl6ZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBnZXRDdXJyZW50VmVoaWNsZUlELCBvcHRpb25KdXN0QWRkZWQsIGdldE5lc3RlZE9wdGlvbnMsIGFsbE9wdGlvbnMsIGNvbmZsaWN0ZWRPcHRpb25zRGV0YWlsczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAvLyBpZiBuZXcgdmVoaWNsZUlkIGVudGVyZWQgYW5kIG9wdGlvbnNDb25maWd1cmF0aW9uIHdpbGwgYmUgY2xlYXJlZAogICAgICAgICAgICAgICAgaWYgKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2N1cnJlbnRWZWhpY2xlSWQnKSkgewogICAgICAgICAgICAgICAgICBnZXRDdXJyZW50VmVoaWNsZUlEID0gSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdjdXJyZW50VmVoaWNsZUlkJykpOwoKICAgICAgICAgICAgICAgICAgaWYgKGdldEN1cnJlbnRWZWhpY2xlSUQgJiYgZ2V0Q3VycmVudFZlaGljbGVJRCAhPT0gcm91dGUucGFyYW1zLnZlaGljbGVJZCkgewogICAgICAgICAgICAgICAgICAgIG9wdGlvbnNDb25maWd1cmF0aW9uRGF0YSA9IHsKICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkT3B0aW9uczogc2VsZWN0ZWRPcHRpb25zLAogICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWRDaG9pY2VzOiBbXSwKICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbjogJycsCiAgICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICcnLAogICAgICAgICAgICAgICAgICAgICAgb3RoZXJBY2Nlc3NvcmllczogW10sCiAgICAgICAgICAgICAgICAgICAgICBjaGFyZ2luZ0ZhY2lsaXRpZXM6IFtdLAogICAgICAgICAgICAgICAgICAgICAgdXNlclNlbGVjdGVkT3B0aW9uczogW10KICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oJ25lc3RlZE9wdGlvbnMnKTsKICAgICAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKCdsYXRlc3RTZWxlY3Rpb24nKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSAvLyA0MzM2NjUyMDIxMDcwMQogICAgICAgICAgICAgICAgLy8gODA5ODE0NjIwMjEwMTAxCiAgICAgICAgICAgICAgICAvLyA3ODYxNjUyMjAyMTA0MDEKICAgICAgICAgICAgICAgIC8vIDQzMzY2NgoKCiAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdvcHRpb25zQ29uZmlndXJhdGlvbkRhdGEnLCBKU09OLnN0cmluZ2lmeShvcHRpb25zQ29uZmlndXJhdGlvbkRhdGEpKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKEFjdGlvblR5cGVzLkdFVF9PUFRJT05TX0NPTkZJR1VSQVRJT05TLCB7CiAgICAgICAgICAgICAgICAgIHZlaGljbGVJZDogcm91dGUucGFyYW1zLnZlaGljbGVJZCwKICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRPcHRpb25zOiBvcHRpb25zQ29uZmlndXJhdGlvbkRhdGEsCiAgICAgICAgICAgICAgICAgIHNlbGVjdGVkQ2hlY2tib3g6IHNlbGVjdGVkQ2hlY2tib3gudmFsdWUsCiAgICAgICAgICAgICAgICAgIHBhY2tNZW1iZXJzOiBwYWNrTWVtYmVycy52YWx1ZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9wdXAnKSkgewogICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ21vZGFsLW9wZW4nKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnbW9kYWwtb3BlbicpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlzRXhwZW5zaXZlRmxhZy52YWx1ZSA9IHRydWU7CiAgICAgICAgICAgICAgICBpc0NvbG9yc1BvcHVwLnZhbHVlID0gZmFsc2U7IC8vIGlmIG5ldyB2ZWhpY2xlSWQgZW50ZXJlZAoKICAgICAgICAgICAgICAgIGlmIChzdGF0ZVZlaGljbGVJZC52YWx1ZSkgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnY3VycmVudFZlaGljbGVJZCcsIEpTT04uc3RyaW5naWZ5KHN0YXRlVmVoaWNsZUlkLnZhbHVlKSk7IC8vIHRvIHRyYWNrIHRoZSBvcHRpb24gdGhhdCBqdXN0IGFkZGVkCgogICAgICAgICAgICAgICAgb3B0aW9uSnVzdEFkZGVkID0gb3B0aW9uc0NvbmZpZ3VyYXRpb25EYXRhWyd1c2VyU2VsZWN0ZWRPcHRpb25zJ11bb3B0aW9uc0NvbmZpZ3VyYXRpb25EYXRhWyd1c2VyU2VsZWN0ZWRPcHRpb25zJ10ubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdvcHRpb25KdXN0QWRkZWQnLCBKU09OLnN0cmluZ2lmeShbb3B0aW9uSnVzdEFkZGVkXSkpOwoKICAgICAgICAgICAgICAgIGlmICghb3B0aW9uSnVzdEFkZGVkKSB7CiAgICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oJ29wdGlvbkp1c3RBZGRlZCcpOwogICAgICAgICAgICAgICAgfSAvLyBjaGVjayBpZiBhbnkgb2YgdGhlIG5lc3RlZE9wdGlvbiBpcyBjb25mbGljdGVkCgoKICAgICAgICAgICAgICAgIGdldE5lc3RlZE9wdGlvbnMgPSBPYmplY3QuZW50cmllcyhuZXN0ZWRPcHRpb25zLnZhbHVlKTsKICAgICAgICAgICAgICAgIGFsbE9wdGlvbnMgPSBnZXROZXN0ZWRPcHRpb25zLmZsYXQoMik7CiAgICAgICAgICAgICAgICBjb25mbGljdGVkT3B0aW9uc0RldGFpbHMgPSBvcHRpb25zUmVzcG9uc2UudmFsdWUuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBhbGxPcHRpb25zLmluZGV4T2YoaXRlbVsnb3B0aW9uSWQnXS50b1N0cmluZygpKSAhPT0gLTEgJiYgaXRlbS5uZXdTdGF0ZSA9PSAnY29uZmxpY3RlZCc7CiAgICAgICAgICAgICAgICB9KS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICB0aXRsZUVuOiBpdGVtWyd0aXRsZUVuJ10sCiAgICAgICAgICAgICAgICAgICAgdGl0bGVObDogaXRlbVsndGl0bGVObCddLAogICAgICAgICAgICAgICAgICAgIGNvZGU6IGl0ZW1bJ2NvZGUnXSwKICAgICAgICAgICAgICAgICAgICBvcHRpb25JRDogaXRlbVsnb3B0aW9uSWQnXS50b1N0cmluZygpLAogICAgICAgICAgICAgICAgICAgIHN0YXRlOiBpdGVtLm5ld1N0YXRlCiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBpZiAoY29uZmxpY3RlZE9wdGlvbnNEZXRhaWxzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBzaG93Q29uZmxpY3RlZE5lc3RlZE9wdGlvbnNQb3B1cC52YWx1ZSA9IHRydWU7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpOwoKICAgICAgcmV0dXJuIGZ1bmN0aW9uIGluaXRpYWxpemUoKSB7CiAgICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfTsKICAgIH0oKTsKCiAgICB2YXIgbG9hZGVyID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gc3RvcmUuc3RhdGUub3B0aW9ucy5vcHRpb25zbG9hZGVyOwogICAgfSk7CiAgICB2YXIgb3B0aW9ucyA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHN0b3JlLnN0YXRlLm9wdGlvbnMub3B0aW9uczsKICAgIH0pOwogICAgdmFyIHBhY2thZ2VzQW5kT3B0aW9ucyA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHN0b3JlLnN0YXRlLm9wdGlvbnMucGFja2FnZXNBbmRPcHRpb25zOwogICAgfSk7CiAgICB2YXIgcmVxdWlyZWRDaG9pY2VzVGl0bGVzID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gc3RvcmUuc3RhdGUub3B0aW9ucy5yZXF1aXJlZENob2ljZXNUaXRsZXM7CiAgICB9KTsKICAgIHZhciBwYWNrTWVtYmVyc1RpdGxlcyA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHN0b3JlLnN0YXRlLm9wdGlvbnMucGFja01lbWJlcnNUaXRsZXM7CiAgICB9KTsKICAgIHZhciBjYXJQb2xpY3lJZCA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHN0b3JlLnN0YXRlLmF1dGguY2FyUG9saWN5QnlJRDsKICAgIH0pOwogICAgdmFyIGN1cnJlbnRVc2VyQ2FyT3JkZXIgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBzdG9yZS5zdGF0ZS5hdXRoLmN1cnJlbnRVc2VyLmNhck9yZGVyczsKICAgIH0pOwogICAgdmFyIGNvbXBseUNhclJlc3BvbnNlID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gc3RvcmUuc3RhdGUub3B0aW9ucy5jb21wbHlDYXJSZXNwb25zZTsKICAgIH0pOwogICAgdmFyIGdldENhcnNCeUlkID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gc3RvcmUuc3RhdGUub3B0aW9ucy5jYXJzQnlJZC5jYXJzOwogICAgfSk7CiAgICB2YXIgY2FyVHlwZSA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHN0b3JlLnN0YXRlLm9wdGlvbnMuY2Fyc0J5SWQuY2Fyc1sndHlwZV80ODYwMiddIHx8IHN0b3JlLnN0YXRlLm9wdGlvbnMuY2Fyc0J5SWQuY2Fyc1snZnVlbF90eXBlXzg3MDInXTsKICAgIH0pOwogICAgdmFyIGNhck9yZGVySWQgPSByZWYocm91dGUucGFyYW1zLmNhck9yZGVySWQpOwogICAgdmFyIGNhck9yZGVyZWRUcnVlID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gdG9Mb3dlckNhc2Uoc3RvcmUuc3RhdGUuYXV0aC5jdXJyZW50VXNlci51c2VyU3RhdHVzKSA9PT0gVVNFUl9TVEFUVVMuQ0FSX09SREVSRUQ7CiAgICB9KTsKICAgIHZhciBOZXRNb250aGx5Q29zdEFuZEZsYWcgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBzdG9yZS5zdGF0ZS5vcHRpb25zLk5ldE1vbnRobHlDb3N0QW5kRmxhZzsKICAgIH0pOwogICAgdmFyIGNvbG9yc0ZsYWcgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBzdG9yZS5zdGF0ZS5vcHRpb25zLmNvbG9yc0ZsYWc7CiAgICB9KTsKICAgIHZhciBhbGxTZWxlY3RlZE9wdGlvbnMgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBzdG9yZS5zdGF0ZS5vcHRpb25zLmFsbFNlbGVjdGVkT3B0aW9uczsKICAgIH0pOwogICAgdmFyIGxhdGVzdFNlbGVjdGlvbiA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHN0b3JlLnN0YXRlLm9wdGlvbnMubGF0ZXN0U2VsZWN0aW9uOwogICAgfSk7CiAgICB2YXIgbGVhc2VSYXRlRXJyb3IgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBzdG9yZS5zdGF0ZS5vcHRpb25zLmxlYXNlUmF0ZUVycm9yOwogICAgfSk7CiAgICB2YXIgY29uZmxpY3RlZE9wdGlvbnMgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBzdG9yZS5zdGF0ZS5vcHRpb25zLmNvbmZsaWN0ZWRPcHRpb25zOwogICAgfSk7CiAgICB2YXIgY29sb3JzTWVzc2FnZSA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGVyck1lc3NhZ2UgPSAnJzsKCiAgICAgIGlmICghY29sb3JzRmxhZy52YWx1ZS5pbnRlcmlvciAmJiAhY29sb3JzRmxhZy52YWx1ZS5leHRlcmlvcikgewogICAgICAgIGVyck1lc3NhZ2UgPSB0KCdfc3RlcDMuc2VsZWN0Qm90aENvbG9yJyk7CiAgICAgIH0gZWxzZSBpZiAoY29sb3JzRmxhZy52YWx1ZS5pbnRlcmlvciAmJiAhY29sb3JzRmxhZy52YWx1ZS5leHRlcmlvcikgewogICAgICAgIGVyck1lc3NhZ2UgPSB0KCdfc3RlcDMuc2VsZWN0RXh0ZXJpb3JDb2xvcicpOwogICAgICB9IGVsc2UgewogICAgICAgIGVyck1lc3NhZ2UgPSB0KCdfc3RlcDMuc2VsZWN0SW50ZXJpb3JDb2xvcicpOwogICAgICB9CgogICAgICByZXR1cm4gZXJyTWVzc2FnZTsKICAgIH0pOwogICAgdmFyIHNlbGVjdGVkQ2hhcmdpbmdGYWNpbGl0eSA9IHJlZigpOwogICAgdmFyIGNhck9yZGVyQWRkID0gcmVhY3RpdmUoewogICAgICB2ZWhpY2xlSWQ6IHJvdXRlLnBhcmFtcy52ZWhpY2xlSWQsCiAgICAgIG1vbnRobHlDb3N0OiAxMy43NCwKICAgICAgY2FyUHJpY2U6IDEyLjI1LAogICAgICBjaGFyZ2luZ0ZhY2lsaXRpZXM6IFtdCiAgICB9KTsKCiAgICB2YXIgcmV2ZXJ0U2VsZWN0ZWRPcHRpb25zID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihzdGF0ZSkgewogICAgICAgIHZhciBsYXRlc3RTZWxlY3Rpb247CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PSAnY29uZmxpY3RlZFJlcXVpcmVkT3B0aW9ucycpIGxhdGVzdFNlbGVjdGlvbiA9IEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnbGF0ZXN0U2VsZWN0aW9uJykpO2Vsc2UgaWYgKHN0YXRlID09ICdjb25mbGljdGVkTmVzdGVkT3B0aW9ucycpIGxhdGVzdFNlbGVjdGlvbiA9IEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnb3B0aW9uSnVzdEFkZGVkJykpOwogICAgICAgICAgICAgICAgbGF0ZXN0U2VsZWN0aW9uLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgZGVsZXRlIG5lc3RlZE9wdGlvbnMudmFsdWVbaXRlbV07CiAgICAgICAgICAgICAgICAgIHZhciBnZXROZXN0ZWRPcHRpb25zID0gT2JqZWN0LmVudHJpZXMobmVzdGVkT3B0aW9ucy52YWx1ZSk7CiAgICAgICAgICAgICAgICAgIG9wdGlvbnNDb25maWd1cmF0aW9uRGF0YVsnc2VsZWN0ZWRPcHRpb25zJ10gPSBnZXROZXN0ZWRPcHRpb25zLmZsYXQoMik7CiAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zQ29uZmlndXJhdGlvbkRhdGFbJ3VzZXJTZWxlY3RlZE9wdGlvbnMnXS5pbmRleE9mKGl0ZW0pICE9IC0xKSBvcHRpb25zQ29uZmlndXJhdGlvbkRhdGFbJ3VzZXJTZWxlY3RlZE9wdGlvbnMnXS5zcGxpY2Uob3B0aW9uc0NvbmZpZ3VyYXRpb25EYXRhWyd1c2VyU2VsZWN0ZWRPcHRpb25zJ10uaW5kZXhPZihpdGVtKSwgMSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG9wdGlvbnNDb25maWd1cmF0aW9uRGF0YVsnYWN0aW9uJ10gPSAnJzsKICAgICAgICAgICAgICAgIG9wdGlvbnNDb25maWd1cmF0aW9uRGF0YVsnb3B0aW9uJ10gPSAnJzsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiBpbml0aWFsaXplKCk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PSAnY29uZmxpY3RlZFJlcXVpcmVkT3B0aW9ucycpIHN0b3JlLnN0YXRlLm9wdGlvbnMubGF0ZXN0U2VsZWN0aW9uID0gW107ZWxzZSBpZiAoc3RhdGUgPT0gJ2NvbmZsaWN0ZWROZXN0ZWRPcHRpb25zJykgc2hvd0NvbmZsaWN0ZWROZXN0ZWRPcHRpb25zUG9wdXAudmFsdWUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnbW9kYWwtb3BlbicpOwogICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSgnb3B0aW9uSnVzdEFkZGVkJyk7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKTsKCiAgICAgIHJldHVybiBmdW5jdGlvbiByZXZlcnRTZWxlY3RlZE9wdGlvbnMoX3gpIHsKICAgICAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfTsKICAgIH0oKTsKCiAgICB2YXIgb25Qb3B1cENsb3NlID0gZnVuY3Rpb24gb25Qb3B1cENsb3NlKCkgewogICAgICB2YXIgc2VsZWN0ZWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPXJhZGlvXVtuYW1lPW5hbWVdOmNoZWNrZWQnKTsKCiAgICAgIGlmIChzZWxlY3RlZCkgewogICAgICAgIHZhciBzZWxlY3RlZElEID0gc2VsZWN0ZWQuaWQucmVwbGFjZSgncmFkaW8tJywgJycpOwogICAgICAgIHN0b3JlLnN0YXRlLm9wdGlvbnMubGF0ZXN0U2VsZWN0aW9uLnB1c2goc2VsZWN0ZWRJRCk7CiAgICAgIH0KCiAgICAgIGlmIChzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdsYXRlc3RTZWxlY3Rpb24nKSkgewogICAgICAgIHJldmVydFNlbGVjdGVkT3B0aW9ucygnY29uZmxpY3RlZFJlcXVpcmVkT3B0aW9ucycpOwogICAgICB9CgogICAgICBzaG93UG9wdXAudmFsdWUgPSBmYWxzZTsKICAgICAgc3RvcmUuY29tbWl0KE11dGF0aW9uVHlwZXMuU0VUX1JFUVVJUkVEX0NIT0lDRVNfVElUTEVTLCBbXSk7CiAgICAgIHN0b3JlLmNvbW1pdChNdXRhdGlvblR5cGVzLlNFVF9QQUNLX01FTUJFUlNfVElUTEVTLCBbXSk7CiAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnbW9kYWwtb3BlbicpOwogICAgfTsKCiAgICB2YXIgY2xvc2VFeHBlbnNpdmVQb3B1cCA9IGZ1bmN0aW9uIGNsb3NlRXhwZW5zaXZlUG9wdXAoKSB7CiAgICAgIGlzRXhwZW5zaXZlRmxhZy52YWx1ZSA9IGZhbHNlOwogICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsLW9wZW4nKTsKICAgIH07CgogICAgdmFyIG9uQ2xvc2UgPSBmdW5jdGlvbiBvbkNsb3NlKCkgewogICAgICBzaG93UG9wdXAudmFsdWUgPSBmYWxzZTsKICAgICAgc3RvcmUuY29tbWl0KE11dGF0aW9uVHlwZXMuU0VUX1BBQ0tfTUVNQkVSU19USVRMRVMsIFtdKTsKICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdtb2RhbC1vcGVuJyk7CiAgICAgIHBhY2tNZW1iZXJzLnZhbHVlID0gJyc7CiAgICB9OwoKICAgIHZhciBnZXRFeHRlcmlvckludGVyaW9yID0gZnVuY3Rpb24gZ2V0RXh0ZXJpb3JJbnRlcmlvcihwcm9wLCB0eXBlKSB7CiAgICAgIHZhciBmaWx0ZXJlZEV4dGVyaW9ySW50ZXJpb3I7CgogICAgICBpZiAob3B0aW9ucy52YWx1ZSkgewogICAgICAgIHZhciBfb3B0aW9ucyR2YWx1ZTsKCiAgICAgICAgdmFyIGRhdGEgPSAoX29wdGlvbnMkdmFsdWUgPSBvcHRpb25zLnZhbHVlKSA9PT0gbnVsbCB8fCBfb3B0aW9ucyR2YWx1ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX29wdGlvbnMkdmFsdWVbcHJvcF07CiAgICAgICAgZmlsdGVyZWRFeHRlcmlvckludGVyaW9yID0gZGF0YSA9PT0gbnVsbCB8fCBkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkYXRhLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIGl0ZW1bJ3R5cGUnXSA9PSB0eXBlOwogICAgICAgIH0pOwogICAgICB9CgogICAgICByZXR1cm4gZmlsdGVyZWRFeHRlcmlvckludGVyaW9yOwogICAgfTsKCiAgICB2YXIgZ3JvdXBCeU9wdGlvbnNUeXBlID0gZnVuY3Rpb24gZ3JvdXBCeU9wdGlvbnNUeXBlKCkgewogICAgICB2YXIgZmlsdGVyZWRFeHRlcmlvck9wdGlvbkMgPSBnZXRFeHRlcmlvckludGVyaW9yKCdleHRlcmlvckNvbG91cicsICdDJyk7CiAgICAgIHZhciBmaWx0ZXJlZEV4dGVyaW9yT3B0aW9uTyA9IGdldEV4dGVyaW9ySW50ZXJpb3IoJ2V4dGVyaW9yQ29sb3VyJywgJ08nKTsKICAgICAgdmFyIGZpbHRlcmVkSW50ZXJpb3JPcHRpb25DID0gZ2V0RXh0ZXJpb3JJbnRlcmlvcignaW50ZXJpb3JDb2xvdXInLCAnQycpOwogICAgICB2YXIgZmlsdGVyZWRJbnRlcmlvck9wdGlvbk8gPSBnZXRFeHRlcmlvckludGVyaW9yKCdpbnRlcmlvckNvbG91cicsICdPJyk7CiAgICAgIGV4dGVyaW9ySW50ZXJpb3IuZXh0ZXJpb3JPcHRpb25DID0gZmlsdGVyZWRFeHRlcmlvck9wdGlvbkM7CiAgICAgIGV4dGVyaW9ySW50ZXJpb3IuZXh0ZXJpb3JPcHRpb25PID0gZmlsdGVyZWRFeHRlcmlvck9wdGlvbk87CiAgICAgIGV4dGVyaW9ySW50ZXJpb3IuaW50ZXJpb3JPcHRpb25DID0gZmlsdGVyZWRJbnRlcmlvck9wdGlvbkM7CiAgICAgIGV4dGVyaW9ySW50ZXJpb3IuaW50ZXJpb3JPcHRpb25PID0gZmlsdGVyZWRJbnRlcmlvck9wdGlvbk87CiAgICB9OwoKICAgIHZhciBnZXRDYXJQb2xpY3lCeUlkID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYzID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKEF1dGhBY3Rpb25UeXBlcy5HRVRfQ0FSUE9MSUNZX0JZX0lELCB7CiAgICAgICAgICAgICAgICAgIGNvbXBhbnlJZDogVnVlQ29va2llTmV4dC5nZXRDb29raWUoJ2NvbXBhbnlJZCcpLAogICAgICAgICAgICAgICAgICBjYXJQb2xpY3lJZDogVnVlQ29va2llTmV4dC5nZXRDb29raWUoJ2VtcGxveWVlQ2FyUG9saWN5SWQnKQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgIH0pKTsKCiAgICAgIHJldHVybiBmdW5jdGlvbiBnZXRDYXJQb2xpY3lCeUlkKCkgewogICAgICAgIHJldHVybiBfcmVmMy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgfSgpOwoKICAgIHZhciBvdGhlckFjY2Vzc29yaWVzRXJyb3JzID0gcmVhY3RpdmUoW3sKICAgICAgZmFjaWxpdHlFcnJvcjogJycsCiAgICAgIHByaWNlRXJyb3I6ICcnCiAgICB9XSk7CiAgICBvbk1vdW50ZWQoIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KCkgewogICAgICB2YXIgX2NhclBvbGljeUlkJHZhbHVlOwoKICAgICAgdmFyIGk7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiBpbml0aWFsaXplKCk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA0OwogICAgICAgICAgICAgIHJldHVybiBncm91cEJ5T3B0aW9uc1R5cGUoKTsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDY7CiAgICAgICAgICAgICAgcmV0dXJuIGdldENhclBvbGljeUJ5SWQoKTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBzZWxlY3RlZENoYXJnaW5nRmFjaWxpdHkudmFsdWUgPSAoX2NhclBvbGljeUlkJHZhbHVlID0gY2FyUG9saWN5SWQudmFsdWUpID09PSBudWxsIHx8IF9jYXJQb2xpY3lJZCR2YWx1ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NhclBvbGljeUlkJHZhbHVlLmNoYXJnaW5nRmFjaWxpdHlbMF07CgogICAgICAgICAgICAgIGlmIChvcHRpb25zQ29uZmlndXJhdGlvbkRhdGFbJ2NoYXJnaW5nRmFjaWxpdGllcyddLmxlbmd0aCkgewogICAgICAgICAgICAgICAgc2VsZWN0ZWRDaGFyZ2luZ0ZhY2lsaXR5LnZhbHVlLmNoYXJnaW5nRmFjaWxpdHkgPSBvcHRpb25zQ29uZmlndXJhdGlvbkRhdGFbJ2NoYXJnaW5nRmFjaWxpdGllcyddWzBdWydhY2Nlc3NvcnknXTsKICAgICAgICAgICAgICAgIHNlbGVjdGVkQ2hhcmdpbmdGYWNpbGl0eS52YWx1ZS5wcmljZSA9IG9wdGlvbnNDb25maWd1cmF0aW9uRGF0YVsnY2hhcmdpbmdGYWNpbGl0aWVzJ11bMF1bJ3ByaWNlJ107CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAob3B0aW9uc0NvbmZpZ3VyYXRpb25EYXRhWydvdGhlckFjY2Vzc29yaWVzJ10ubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICBBcnJheS5wcm90b3R5cGUudW5zaGlmdC5hcHBseShvdGhlcnMudmFsdWUsIG9wdGlvbnNDb25maWd1cmF0aW9uRGF0YVsnb3RoZXJBY2Nlc3NvcmllcyddKTsKCiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgb3B0aW9uc0NvbmZpZ3VyYXRpb25EYXRhWydvdGhlckFjY2Vzc29yaWVzJ10ubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgb3RoZXJBY2Nlc3Nvcmllc0Vycm9ycy51bnNoaWZ0KHsKICAgICAgICAgICAgICAgICAgICBmYWNpbGl0eUVycm9yOiAnJywKICAgICAgICAgICAgICAgICAgICBwcmljZUVycm9yOiAnJwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CgogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlNCk7CiAgICB9KSkpOwoKICAgIHZhciBjaGVja0lmRXF1YWwgPSBmdW5jdGlvbiBjaGVja0lmRXF1YWwoYXJyYXkxLCBhcnJheTIpIHsKICAgICAgaWYgKGFycmF5MS5sZW5ndGggPT09IGFycmF5Mi5sZW5ndGgpIHsKICAgICAgICByZXR1cm4gYXJyYXkxLmV2ZXJ5KGZ1bmN0aW9uIChlbGVtZW50LCBpbmRleCkgewogICAgICAgICAgaWYgKGVsZW1lbnQgPT09IGFycmF5MltpbmRleF0pIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0pOwogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9OwoKICAgIHdhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIF8uY2xvbmVEZWVwKG9wdGlvbnMudmFsdWUpOwogICAgfSwgZnVuY3Rpb24gKCkgewogICAgICBncm91cEJ5T3B0aW9uc1R5cGUoKTsKICAgIH0pOwogICAgd2F0Y2goZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gXy5jbG9uZURlZXAocmVxdWlyZWRDaG9pY2VzVGl0bGVzLnZhbHVlKTsKICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgcmVxdWlyZWRDaG9pY2VJbmRleC52YWx1ZSA9IDA7CiAgICB9KTsKICAgIHdhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHJvdXRlLnBhcmFtcy52ZWhpY2xlSWQ7CiAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oJ29wdGlvbnNDb25maWd1cmF0aW9uRGF0YScpOwogICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKCduZXN0ZWRPcHRpb25zJyk7CiAgICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oJ2xhdGVzdFNlbGVjdGlvbicpOwogICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKCdjdXJyZW50VmVoaWNsZUlkJyk7CiAgICB9KTsKICAgIHdhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIF8uY2xvbmVEZWVwKGFsbFNlbGVjdGVkT3B0aW9ucy52YWx1ZSk7CiAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBtZXJnZWRBcnJheSA9IF90b0NvbnN1bWFibGVBcnJheShuZXcgU2V0KFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkob3B0aW9uc0NvbmZpZ3VyYXRpb25EYXRhWydzZWxlY3RlZE9wdGlvbnMnXSksIF90b0NvbnN1bWFibGVBcnJheShhbGxTZWxlY3RlZE9wdGlvbnMudmFsdWUpKSkpOwoKICAgICAgaWYgKCFjaGVja0lmRXF1YWwob3B0aW9uc0NvbmZpZ3VyYXRpb25EYXRhWydzZWxlY3RlZE9wdGlvbnMnXSwgbWVyZ2VkQXJyYXkpKSB7CiAgICAgICAgb3B0aW9uc0NvbmZpZ3VyYXRpb25EYXRhWydzZWxlY3RlZE9wdGlvbnMnXSA9IG1lcmdlZEFycmF5OwogICAgICAgIGluaXRpYWxpemUoKTsKICAgICAgfQogICAgfSk7CiAgICB3YXRjaChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBfLmNsb25lRGVlcChsYXRlc3RTZWxlY3Rpb24udmFsdWUpOwogICAgfSwgZnVuY3Rpb24gKGN1cnJlbnRWYWx1ZSkgewogICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdsYXRlc3RTZWxlY3Rpb24nLCBKU09OLnN0cmluZ2lmeShjdXJyZW50VmFsdWUpKTsKCiAgICAgIGlmICghbGF0ZXN0U2VsZWN0aW9uLnZhbHVlLmxlbmd0aCkgewogICAgICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oJ2xhdGVzdFNlbGVjdGlvbicpOwogICAgICB9CiAgICB9KTsKICAgIHdhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIF8uY2xvbmVEZWVwKG5lc3RlZE9wdGlvbnMudmFsdWUpOwogICAgfSwgZnVuY3Rpb24gKGN1cnJlbnRWYWx1ZSkgewogICAgICBpZiAob3B0aW9uc0NvbmZpZ3VyYXRpb25EYXRhWydhY3Rpb24nXSA9PSAnYWRkZWQnICYmIG9wdGlvbnNDb25maWd1cmF0aW9uRGF0YVsnb3B0aW9uJ10gJiYgb3B0aW9uc1Jlc3BvbnNlLnZhbHVlLmxlbmd0aCkgewogICAgICAgIHZhciBhZGRUb05lc3RlZE9wdGlvbnMgPSBmdW5jdGlvbiBhZGRUb05lc3RlZE9wdGlvbnMoc2VsZWN0ZWRPcHRpb25JZCwga2V5KSB7CiAgICAgICAgICB2YXIgcGFja01lbWJlcnMgPSBvcHRpb25zUmVzcG9uc2VBc09iamVjdC52YWx1ZVtzZWxlY3RlZE9wdGlvbklkXVsncGFja01lbWJlcnMnXTsKICAgICAgICAgIHZhciByZXF1aXJlZE9wdGlvbnMgPSBvcHRpb25zUmVzcG9uc2VBc09iamVjdC52YWx1ZVtzZWxlY3RlZE9wdGlvbklkXVsncmVxdWlyZWQnXTsKCiAgICAgICAgICB2YXIgZmxhdHRlbkFycmF5ID0gX3RvQ29uc3VtYWJsZUFycmF5KG5ldyBTZXQoW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShwYWNrTWVtYmVycyAhPT0gbnVsbCAmJiBwYWNrTWVtYmVycyAhPT0gdm9pZCAwID8gcGFja01lbWJlcnMgOiAnJyksIF90b0NvbnN1bWFibGVBcnJheShyZXF1aXJlZE9wdGlvbnMgIT09IG51bGwgJiYgcmVxdWlyZWRPcHRpb25zICE9PSB2b2lkIDAgPyByZXF1aXJlZE9wdGlvbnMgOiAnJykpKSk7CgogICAgICAgICAgcmV0dXJuIGZsYXR0ZW5BcnJheS5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgICBpZiAoc3RvcmUuc3RhdGUub3B0aW9ucy5uZXN0ZWRPcHRpb25zW2tleV0uaW5kZXhPZih2YWx1ZSkgPT09IC0xKSB7CiAgICAgICAgICAgICAgc3RvcmUuc3RhdGUub3B0aW9ucy5uZXN0ZWRPcHRpb25zW2tleV0ucHVzaCh2YWx1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIHZhciB1c2VyU2VsZWN0ZWRPcHRpb25JZHMgPSBvcHRpb25zQ29uZmlndXJhdGlvbkRhdGFbJ3VzZXJTZWxlY3RlZE9wdGlvbnMnXTsKICAgICAgICB1c2VyU2VsZWN0ZWRPcHRpb25JZHMuZm9yRWFjaChmdW5jdGlvbiAob3B0aW9uSWQpIHsKICAgICAgICAgIGFkZFRvTmVzdGVkT3B0aW9ucyhvcHRpb25JZCwgb3B0aW9uSWQpOwogICAgICAgICAgY3VycmVudFZhbHVlW29wdGlvbklkXS5mb3JFYWNoKGZ1bmN0aW9uIChuZXN0ZWRPcHRpb25JZCkgewogICAgICAgICAgICBhZGRUb05lc3RlZE9wdGlvbnMobmVzdGVkT3B0aW9uSWQsIG9wdGlvbklkKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9CgogICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCduZXN0ZWRPcHRpb25zJywgSlNPTi5zdHJpbmdpZnkoY3VycmVudFZhbHVlKSk7CgogICAgICBpZiAoIU9iamVjdC5rZXlzKG5lc3RlZE9wdGlvbnMudmFsdWUpLmxlbmd0aCkgewogICAgICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oJ25lc3RlZE9wdGlvbnMnKTsKICAgICAgfQogICAgfSk7CiAgICB3YXRjaChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBfLmNsb25lRGVlcChjb25mbGljdGVkT3B0aW9ucy52YWx1ZSk7CiAgICB9LCBmdW5jdGlvbiAoY3VycmVudFZhbHVlKSB7CiAgICAgIGlmIChjdXJyZW50VmFsdWUubGVuZ3RoKSB7CiAgICAgICAgc2hvd0NvbmZsaWN0ZWRPcHRpb25zUG9wdXAudmFsdWUgPSB0cnVlOwogICAgICAgIGN1cnJlbnRWYWx1ZS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICBvcHRpb25zQ29uZmlndXJhdGlvbkRhdGFbJ3NlbGVjdGVkT3B0aW9ucyddLnNwbGljZShvcHRpb25zQ29uZmlndXJhdGlvbkRhdGFbJ3NlbGVjdGVkT3B0aW9ucyddLmluZGV4T2YoaXRlbVsnb3B0aW9uSUQnXSksIDEpOwogICAgICAgICAgb3B0aW9uc0NvbmZpZ3VyYXRpb25EYXRhWyd1c2VyU2VsZWN0ZWRPcHRpb25zJ10uc3BsaWNlKG9wdGlvbnNDb25maWd1cmF0aW9uRGF0YVsndXNlclNlbGVjdGVkT3B0aW9ucyddLmluZGV4T2YoaXRlbVsnb3B0aW9uSUQnXSksIDEpOwogICAgICAgICAgZGVsZXRlIG5lc3RlZE9wdGlvbnMudmFsdWVbaXRlbVsnb3B0aW9uSUQnXV07CiAgICAgICAgfSk7CiAgICAgICAgaW5pdGlhbGl6ZSgpOwogICAgICB9CiAgICB9KTsKCiAgICB2YXIgZ2V0RmlsdGVyZWRQYWNrYWdlT3B0aW9ucyA9IGZ1bmN0aW9uIGdldEZpbHRlcmVkUGFja2FnZU9wdGlvbnMocHJvcCwgdHlwZSkgewogICAgICB2YXIgZmlsdGVyZWRQYWNrYWdlc0FuZE9wdGlvbnM7CgogICAgICBpZiAocGFja2FnZXNBbmRPcHRpb25zLnZhbHVlKSB7CiAgICAgICAgdmFyIF9wYWNrYWdlc0FuZE9wdGlvbnMkdjsKCiAgICAgICAgdmFyIGRhdGEgPSAoX3BhY2thZ2VzQW5kT3B0aW9ucyR2ID0gcGFja2FnZXNBbmRPcHRpb25zLnZhbHVlKSA9PT0gbnVsbCB8fCBfcGFja2FnZXNBbmRPcHRpb25zJHYgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9wYWNrYWdlc0FuZE9wdGlvbnMkdltwcm9wXTsKICAgICAgICBmaWx0ZXJlZFBhY2thZ2VzQW5kT3B0aW9ucyA9IGRhdGEgPT09IG51bGwgfHwgZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGF0YS5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiBpdGVtWyd0eXBlJ10gPT0gdHlwZTsKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgcmV0dXJuIGZpbHRlcmVkUGFja2FnZXNBbmRPcHRpb25zOwogICAgfTsKCiAgICB2YXIgZ2V0UGFja2FnZXNBbmRPcHRpb25zID0gZnVuY3Rpb24gZ2V0UGFja2FnZXNBbmRPcHRpb25zKHR5cGUpIHsKICAgICAgdmFyIHBhY2thZ2VPcHRpb25zID0ge307CgogICAgICBmb3IgKHZhciBrZXkgaW4gcGFja2FnZXNBbmRPcHRpb25zLnZhbHVlKSB7CiAgICAgICAgdmFyIHJlc3VsdCA9IGdldEZpbHRlcmVkUGFja2FnZU9wdGlvbnMoa2V5LCB0eXBlKTsKCiAgICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHQubGVuZ3RoKSB7CiAgICAgICAgICBwYWNrYWdlT3B0aW9uc1trZXldID0gcmVzdWx0OwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHBhY2thZ2VPcHRpb25zOwogICAgfTsKCiAgICB2YXIgc2V0VG9EZWZhdWx0ID0gZnVuY3Rpb24gc2V0VG9EZWZhdWx0KCkgewogICAgICBzaG93UG9wdXAudmFsdWUgPSB0cnVlOwogICAgICByZXF1aXJlZENob2ljZUluZGV4LnZhbHVlID0gMDsKICAgIH07CgogICAgdmFyIGNoZWNrQ2hhcmdpbmdGYWNpbGl0eSA9IGZ1bmN0aW9uIGNoZWNrQ2hhcmdpbmdGYWNpbGl0eShmdWVsVHlwZSkgewogICAgICBpZiAoZnVlbFR5cGUgPT0gJ2VsZWN0cmljJyB8fCBmdWVsVHlwZSA9PSAncGx1Z19pbl9oeWJyaWQnKSB7CiAgICAgICAgaWYgKGNhclBvbGljeUlkLnZhbHVlLmZ1ZWxUeXBlKSB7CiAgICAgICAgICB2YXIgY2hlY2tGdWVsVHlwZSA9IGNhclBvbGljeUlkLnZhbHVlLmZ1ZWxUeXBlLnNvbWUoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgcmV0dXJuIGl0ZW0udGl0bGUgPT0gZnVlbFR5cGUgJiYgaXRlbS5pc0NoYXJnaW5nTWFuZGF0b3J5ID09IDE7CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiBjaGVja0Z1ZWxUeXBlOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH07CgogICAgdmFyIG9uQ2hlY2sgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlZjUgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KGl0ZW0pIHsKICAgICAgICB2YXIgZ2V0TmVzdGVkT3B0aW9uczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgb3B0aW9uc0NvbmZpZ3VyYXRpb25EYXRhWydvcHRpb24nXSA9IGl0ZW1bJ29wdGlvbiddLnRhcmdldC5pZDsKICAgICAgICAgICAgICAgIG9wdGlvbnNDb25maWd1cmF0aW9uRGF0YVsnYWN0aW9uJ10gPSBpdGVtWydvcHRpb24nXS50YXJnZXQuY2hlY2tlZCA/ICdhZGRlZCcgOiAncmVtb3ZlZCc7CgogICAgICAgICAgICAgICAgaWYgKG9wdGlvbnNDb25maWd1cmF0aW9uRGF0YVsnc2VsZWN0ZWRPcHRpb25zJ10uaW5kZXhPZihpdGVtWydvcHRpb24nXS50YXJnZXQuaWQpID09PSAtMSkgewogICAgICAgICAgICAgICAgICBvcHRpb25zQ29uZmlndXJhdGlvbkRhdGFbJ3NlbGVjdGVkT3B0aW9ucyddLnB1c2goaXRlbVsnb3B0aW9uJ10udGFyZ2V0LmlkKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAob3B0aW9uc0NvbmZpZ3VyYXRpb25EYXRhWyd1c2VyU2VsZWN0ZWRPcHRpb25zJ10uaW5kZXhPZihpdGVtWydvcHRpb24nXS50YXJnZXQuaWQpID09PSAtMSkgewogICAgICAgICAgICAgICAgICBvcHRpb25zQ29uZmlndXJhdGlvbkRhdGFbJ3VzZXJTZWxlY3RlZE9wdGlvbnMnXS5wdXNoKGl0ZW1bJ29wdGlvbiddLnRhcmdldC5pZCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKCFpdGVtWydvcHRpb24nXS50YXJnZXQuY2hlY2tlZCkgewogICAgICAgICAgICAgICAgICBvcHRpb25zQ29uZmlndXJhdGlvbkRhdGFbJ3NlbGVjdGVkT3B0aW9ucyddLnNwbGljZShvcHRpb25zQ29uZmlndXJhdGlvbkRhdGFbJ3NlbGVjdGVkT3B0aW9ucyddLmluZGV4T2YoaXRlbVsnb3B0aW9uJ10udGFyZ2V0LmlkKSwgMSk7CiAgICAgICAgICAgICAgICAgIG9wdGlvbnNDb25maWd1cmF0aW9uRGF0YVsndXNlclNlbGVjdGVkT3B0aW9ucyddLnNwbGljZShvcHRpb25zQ29uZmlndXJhdGlvbkRhdGFbJ3VzZXJTZWxlY3RlZE9wdGlvbnMnXS5pbmRleE9mKGl0ZW1bJ29wdGlvbiddLnRhcmdldC5pZCksIDEpOwogICAgICAgICAgICAgICAgICBwYWNrTWVtYmVyc1BvcFVwVGl0bGUudmFsdWUgPSB0KCdfc3RlcDMuaXRlbXNSZW1vdmVkJyk7IC8vIGlmIHVuY2hlY2tlZCByZW1vdmVkIHNlbGVjdGVkT3B0aW9ucyArIHBhY2tNZW1iZXJzICsgcmVxdWlyZWRPcHRpb25zCgogICAgICAgICAgICAgICAgICBkZWxldGUgbmVzdGVkT3B0aW9ucy52YWx1ZVtvcHRpb25zQ29uZmlndXJhdGlvbkRhdGFbJ29wdGlvbiddXTsKICAgICAgICAgICAgICAgICAgZ2V0TmVzdGVkT3B0aW9ucyA9IE9iamVjdC5lbnRyaWVzKG5lc3RlZE9wdGlvbnMudmFsdWUpOwogICAgICAgICAgICAgICAgICBvcHRpb25zQ29uZmlndXJhdGlvbkRhdGFbJ3NlbGVjdGVkT3B0aW9ucyddID0gZ2V0TmVzdGVkT3B0aW9ucy5mbGF0KDIpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgcGFja01lbWJlcnNQb3BVcFRpdGxlLnZhbHVlID0gdCgnX3N0ZXAzLml0ZW1zQWRkZWQnKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBzZWxlY3RlZENoZWNrYm94LnZhbHVlID0gaXRlbVsnb3B0aW9uJ10udGFyZ2V0LmlkOwogICAgICAgICAgICAgICAgcGFja01lbWJlcnMudmFsdWUgPSBpdGVtLnBhY2tNZW1iZXJzOwogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA5OwogICAgICAgICAgICAgICAgcmV0dXJuIGluaXRpYWxpemUoKTsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgc2V0VG9EZWZhdWx0KCk7CiAgICAgICAgICAgICAgICBjb21wb25lbnRLZXkudmFsdWUgKz0gMTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNSk7CiAgICAgIH0pKTsKCiAgICAgIHJldHVybiBmdW5jdGlvbiBvbkNoZWNrKF94MikgewogICAgICAgIHJldHVybiBfcmVmNS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgfSgpOwoKICAgIHZhciBvblJhZGlvQ2xpY2sgPSBmdW5jdGlvbiBvblJhZGlvQ2xpY2soaXRlbSkgewogICAgICB2YXIgb3B0aW9uSWQgPSBpdGVtLm9wdGlvbklkOwogICAgICBzZWxlY3RlZENoZWNrYm94LnZhbHVlID0gb3B0aW9uSWQ7CiAgICAgIHBhY2tNZW1iZXJzLnZhbHVlID0gaXRlbS5wYWNrTWVtYmVyczsKICAgIH07CgogICAgdmFyIG9uUHJvY2VlZCA9IGZ1bmN0aW9uIG9uUHJvY2VlZCgpIHsKICAgICAgdmFyIHNlbGVjdGVkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1yYWRpb11bbmFtZT1uYW1lXTpjaGVja2VkJyk7CgogICAgICBpZiAoc2VsZWN0ZWQpIHsKICAgICAgICB2YXIgc2VsZWN0ZWRJRCA9IHNlbGVjdGVkLmlkLnJlcGxhY2UoJ3JhZGlvLScsICcnKTsKICAgICAgICBvcHRpb25zQ29uZmlndXJhdGlvbkRhdGFbJ2FjdGlvbiddID0gJ2FkZGVkJzsKICAgICAgICBvcHRpb25zQ29uZmlndXJhdGlvbkRhdGFbJ29wdGlvbiddID0gc2VsZWN0ZWRJRDsKICAgICAgICBvcHRpb25zQ29uZmlndXJhdGlvbkRhdGFbJ3NlbGVjdGVkT3B0aW9ucyddLnB1c2goc2VsZWN0ZWRJRCk7CiAgICAgICAgb3B0aW9uc0NvbmZpZ3VyYXRpb25EYXRhWyd1c2VyU2VsZWN0ZWRPcHRpb25zJ10ucHVzaChzZWxlY3RlZElEKTsKICAgICAgICBzdG9yZS5zdGF0ZS5vcHRpb25zLmxhdGVzdFNlbGVjdGlvbi5wdXNoKHNlbGVjdGVkSUQpOwogICAgICAgIGluaXRpYWxpemUoKTsKICAgICAgfQoKICAgICAgaWYgKHJlcXVpcmVkQ2hvaWNlSW5kZXgudmFsdWUgPCByZXF1aXJlZENob2ljZXNUaXRsZXMudmFsdWUubGVuZ3RoIC0gMSkgewogICAgICAgIHJlcXVpcmVkQ2hvaWNlSW5kZXgudmFsdWUgKz0gMTsKICAgICAgfQogICAgfTsKCiAgICB2YXIgY2hlY2tDb25mbGljdGVkT3B0aW9ucyA9IGZ1bmN0aW9uIGNoZWNrQ29uZmxpY3RlZE9wdGlvbnMob3B0aW9ucykgewogICAgICB2YXIgaXNTdGF0ZUNvbmZsaWN0ZWQgPSBvcHRpb25zLmV2ZXJ5KGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW1bJ25ld1N0YXRlJ10gPT0gJ2NvbmZsaWN0ZWQnOwogICAgICB9KTsKICAgICAgcmV0dXJuIGlzU3RhdGVDb25mbGljdGVkOwogICAgfTsKCiAgICB2YXIgZ2V0VHJhbnNsYXRlZENhdGVnb3J5ID0gZnVuY3Rpb24gZ2V0VHJhbnNsYXRlZENhdGVnb3J5KGl0ZW0pIHsKICAgICAgdmFyIGNhdGVnb3J5ID0gJ19jb25maWd1cmUub3RoZXInOwoKICAgICAgaWYgKGl0ZW0gPT0gJ1NhZmV0eScpIHsKICAgICAgICBjYXRlZ29yeSA9ICdfY29uZmlndXJlLnNhZmV0eSc7CiAgICAgIH0gZWxzZSBpZiAoaXRlbSA9PSAnRHJpdmluZyAmIGJyYWtpbmcnKSB7CiAgICAgICAgY2F0ZWdvcnkgPSAnX2NvbmZpZ3VyZS5kcml2aW5nQW5kQnJha2luZyc7CiAgICAgIH0gZWxzZSBpZiAoaXRlbSA9PSAnQXVkaW8gJiBFbnRlcnRhaW5tZW50JykgewogICAgICAgIGNhdGVnb3J5ID0gJ19jb25maWd1cmUuYXVkaW9FbnRlcnRhaW5tZW50JzsKICAgICAgfSBlbHNlIGlmIChpdGVtID09ICdDb21mb3J0JykgewogICAgICAgIGNhdGVnb3J5ID0gJ19jb25maWd1cmUuY29tZm9ydCc7CiAgICAgIH0gZWxzZSBpZiAoaXRlbSA9PSAnSW50ZXJpb3IgY29sb3VyJykgewogICAgICAgIGNhdGVnb3J5ID0gJ19jb25maWd1cmUuaW50ZXJpb3JDb2xvdXInOwogICAgICB9IGVsc2UgaWYgKGl0ZW0gPT0gJ0V4dGVyaW9yIGNvbG91cicpIHsKICAgICAgICBjYXRlZ29yeSA9ICdfY29uZmlndXJlLmV4dGVyaW9yQ29sb3VyJzsKICAgICAgfQoKICAgICAgcmV0dXJuIGNhdGVnb3J5OwogICAgfTsKCiAgICB2YXIgZ2V0U3RhdHVzID0gZnVuY3Rpb24gZ2V0U3RhdHVzKGl0ZW0pIHsKICAgICAgcmV0dXJuIGl0ZW1bJ25ld1N0YXRlJ10gPT09ICdzZWxlY3RlZCcgfHwgaXRlbVsnaXNQYWNrJ10gPT0gdHJ1ZSB8fCBpdGVtWyduZXdTdGF0ZSddID09PSAncmVxdWlyZWQnOwogICAgfTsKCiAgICB2YXIgYWRkVG9PcHRpb25zQ29uZmlndXJhdGlvbnMgPSBmdW5jdGlvbiBhZGRUb09wdGlvbnNDb25maWd1cmF0aW9ucygpIHsKICAgICAgb3B0aW9uc0NvbmZpZ3VyYXRpb25EYXRhWydvdGhlckFjY2Vzc29yaWVzJ10gPSAhb3RoZXJzLnZhbHVlWzBdWydhY2Nlc3NvcnknXSA/IFtdIDogcmVtb3ZlVHlwZShvdGhlcnMudmFsdWUpOwogICAgICBpbml0aWFsaXplKCk7CiAgICB9OwoKICAgIHZhciBhZGRGYWNpbGl0eSA9IGZ1bmN0aW9uIGFkZEZhY2lsaXR5KGl0ZW0pIHsKICAgICAgb3RoZXJzLnZhbHVlLnB1c2goewogICAgICAgIGFjY2Vzc29yeTogJycsCiAgICAgICAgcHJpY2U6ICcnLAogICAgICAgIHR5cGU6ICdhZGQnCiAgICAgIH0pOwogICAgICBvdGhlcnMudmFsdWVbaXRlbVsnaW5kZXgnXV1bJ3R5cGUnXSA9ICdkZWxldGUnOwogICAgICBvdGhlckFjY2Vzc29yaWVzRXJyb3JzLnB1c2goewogICAgICAgIGZhY2lsaXR5RXJyb3I6ICcnLAogICAgICAgIHByaWNlRXJyb3I6ICcnCiAgICAgIH0pOwogICAgICBhZGRUb09wdGlvbnNDb25maWd1cmF0aW9ucygpOwogICAgfTsKCiAgICB2YXIgZGVsZXRlRmFjaWxpdHkgPSBmdW5jdGlvbiBkZWxldGVGYWNpbGl0eShpdGVtKSB7CiAgICAgIG90aGVycy52YWx1ZS5zcGxpY2UoaXRlbVsnaW5kZXgnXSwgMSk7CiAgICAgIGFkZFRvT3B0aW9uc0NvbmZpZ3VyYXRpb25zKCk7CiAgICB9OwoKICAgIHZhciBzZWxlY3RDaGFyZ2luZ0ZhY2lsaXR5ID0gZnVuY3Rpb24gc2VsZWN0Q2hhcmdpbmdGYWNpbGl0eShpdGVtKSB7CiAgICAgIHZhciBfY2FyVHlwZSR2YWx1ZTsKCiAgICAgIHNlbGVjdGVkQ2hhcmdpbmdGYWNpbGl0eS52YWx1ZSA9IGl0ZW07CiAgICAgIGlmIChjaGVja0NoYXJnaW5nRmFjaWxpdHkoKF9jYXJUeXBlJHZhbHVlID0gY2FyVHlwZS52YWx1ZSkgIT09IG51bGwgJiYgX2NhclR5cGUkdmFsdWUgIT09IHZvaWQgMCA/IF9jYXJUeXBlJHZhbHVlIDogJycpKSBvcHRpb25zQ29uZmlndXJhdGlvbkRhdGFbJ2NoYXJnaW5nRmFjaWxpdGllcyddID0gW3sKICAgICAgICBhY2Nlc3Nvcnk6IHNlbGVjdGVkQ2hhcmdpbmdGYWNpbGl0eS52YWx1ZVsnY2hhcmdpbmdGYWNpbGl0eSddLAogICAgICAgIHByaWNlOiBzZWxlY3RlZENoYXJnaW5nRmFjaWxpdHkudmFsdWVbJ3ByaWNlJ10KICAgICAgfV07CiAgICAgIGluaXRpYWxpemUoKTsKICAgIH07CgogICAgdmFyIG9uTmFtZUlucHV0ID0gZnVuY3Rpb24gb25OYW1lSW5wdXQob3B0aW9uKSB7CiAgICAgIG90aGVycy52YWx1ZVtvcHRpb25bJ2luZGV4J11dWydhY2Nlc3NvcnknXSA9IG9wdGlvblsnaXRlbSddOwogICAgICBkZWxldGUgb3RoZXJBY2Nlc3Nvcmllc0Vycm9yc1tvcHRpb25bJ2luZGV4J11dWydmYWNpbGl0eUVycm9yJ107CgogICAgICBpZiAob3RoZXJzLnZhbHVlW29wdGlvblsnaW5kZXgnXV1bJ2FjY2Vzc29yeSddLmxlbmd0aCA8IDIgfHwgb3RoZXJzLnZhbHVlW29wdGlvblsnaW5kZXgnXV1bJ2FjY2Vzc29yeSddLmxlbmd0aCA+IDI1MCkgewogICAgICAgIG90aGVyQWNjZXNzb3JpZXNFcnJvcnNbb3B0aW9uWydpbmRleCddXVsnZmFjaWxpdHlFcnJvciddID0gJ0xlbmd0aEVycm9yJzsKICAgICAgfQogICAgfTsKCiAgICB2YXIgb25QcmljZUlucHV0ID0gZnVuY3Rpb24gb25QcmljZUlucHV0KG9wdGlvbikgewogICAgICBvdGhlcnMudmFsdWVbb3B0aW9uWydpbmRleCddXVsncHJpY2UnXSA9IG9wdGlvblsnaXRlbSddOwogICAgICBkZWxldGUgb3RoZXJBY2Nlc3Nvcmllc0Vycm9yc1tvcHRpb25bJ2luZGV4J11dWydwcmljZUVycm9yJ107CgogICAgICBpZiAoIW90aGVycy52YWx1ZVtvcHRpb25bJ2luZGV4J11dWydwcmljZSddLm1hdGNoKC9eWzAtOS4sXSokLykpIHsKICAgICAgICBvdGhlckFjY2Vzc29yaWVzRXJyb3JzW29wdGlvblsnaW5kZXgnXV1bJ3ByaWNlRXJyb3InXSA9ICd0eXBlRXJyb3InOwogICAgICB9CiAgICB9OwoKICAgIHZhciBnZXRGaWx0ZXJlZE5lc3RlZE9wdGlvbnMgPSBmdW5jdGlvbiBnZXRGaWx0ZXJlZE5lc3RlZE9wdGlvbnMoKSB7CiAgICAgIHZhciBuZXN0ZWRPcHRpb25zID0gSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCduZXN0ZWRPcHRpb25zJykpOwogICAgICB2YXIgb3B0aW9ucyA9IFtdOwoKICAgICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3Aoa2V5KSB7CiAgICAgICAgb3B0aW9uc1Jlc3BvbnNlLnZhbHVlLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIGlmIChpdGVtWydvcHRpb25JZCddLnRvU3RyaW5nKCkgPT0ga2V5KSB7CiAgICAgICAgICAgIG9wdGlvbnMucHVzaCh7CiAgICAgICAgICAgICAgdGl0bGVFbjogaXRlbVsndGl0bGVFbiddLAogICAgICAgICAgICAgIHRpdGxlTmw6IGl0ZW1bJ3RpdGxlTmwnXSwKICAgICAgICAgICAgICBjb2RlOiBpdGVtWydjb2RlJ10sCiAgICAgICAgICAgICAgb3B0aW9uSWQ6IGl0ZW1bJ29wdGlvbklkJ10sCiAgICAgICAgICAgICAgdHlwZTogaXRlbVsndHlwZSddLAogICAgICAgICAgICAgIHByaWNlOiBpdGVtWydwcmljZSddLAogICAgICAgICAgICAgIHByaWNlRXhjbHVkaW5nVkFUOiBpdGVtWydwcmljZUV4Y2x1ZGluZ1ZBVCddLAogICAgICAgICAgICAgIGNhdGVnb3J5OiBpdGVtWydjYXRlZ29yeSddLAogICAgICAgICAgICAgIGNoaWxkcmVuOiBuZXN0ZWRPcHRpb25zW2tleV0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH07CgogICAgICBmb3IgKHZhciBrZXkgaW4gbmVzdGVkT3B0aW9ucykgewogICAgICAgIF9sb29wKGtleSk7CiAgICAgIH0KCiAgICAgIG9wdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAob3B0aW9uKSB7CiAgICAgICAgdmFyIG5lc3RlZENoaWxkZXJuID0gb3B0aW9uc1Jlc3BvbnNlLnZhbHVlLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIG9wdGlvbi5jaGlsZHJlbi5pbmRleE9mKGl0ZW1bJ29wdGlvbklkJ10udG9TdHJpbmcoKSkgIT09IC0xOwogICAgICAgIH0pLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgdGl0bGVFbjogaXRlbVsndGl0bGVFbiddLAogICAgICAgICAgICB0aXRsZU5sOiBpdGVtWyd0aXRsZU5sJ10sCiAgICAgICAgICAgIGNvZGU6IGl0ZW1bJ2NvZGUnXSwKICAgICAgICAgICAgb3B0aW9uSWQ6IGl0ZW1bJ29wdGlvbklkJ10sCiAgICAgICAgICAgIHR5cGU6IGl0ZW1bJ3R5cGUnXSwKICAgICAgICAgICAgcHJpY2U6IGl0ZW1bJ3ByaWNlJ10sCiAgICAgICAgICAgIHByaWNlRXhjbHVkaW5nVkFUOiBpdGVtWydwcmljZUV4Y2x1ZGluZ1ZBVCddLAogICAgICAgICAgICBjYXRlZ29yeTogaXRlbVsnY2F0ZWdvcnknXQogICAgICAgICAgfTsKICAgICAgICB9KTsKICAgICAgICBvcHRpb24uY2hpbGRyZW4gPSBuZXN0ZWRDaGlsZGVybjsKICAgICAgfSk7CiAgICAgIHJldHVybiBvcHRpb25zOwogICAgfTsKCiAgICB2YXIgb25Qcm9jZWVkQ2FyT3JkZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlZjYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KCkgewogICAgICAgIHZhciBfY2FyVHlwZSR2YWx1ZTI7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjYXJPcmRlckFkZFsnY28yRW1pc3Npb24nXSA9IGdldENhcnNCeUlkLnZhbHVlWydjb21iaW5lZF82MjIwMyddLCBjYXJPcmRlckFkZFsnb3B0aW9ucyddID0gZ2V0RmlsdGVyZWROZXN0ZWRPcHRpb25zKCk7CiAgICAgICAgICAgICAgICBjYXJPcmRlckFkZFsnb3RoZXJBY2Nlc3NvcmllcyddID0gIW90aGVycy52YWx1ZVswXVsnYWNjZXNzb3J5J10gPyBbXSA6IHJlbW92ZVR5cGUob3RoZXJzLnZhbHVlKTsKICAgICAgICAgICAgICAgIGlmIChjaGVja0NoYXJnaW5nRmFjaWxpdHkoKF9jYXJUeXBlJHZhbHVlMiA9IGNhclR5cGUudmFsdWUpICE9PSBudWxsICYmIF9jYXJUeXBlJHZhbHVlMiAhPT0gdm9pZCAwID8gX2NhclR5cGUkdmFsdWUyIDogJycpKSBjYXJPcmRlckFkZFsnY2hhcmdpbmdGYWNpbGl0aWVzJ10gPSBbewogICAgICAgICAgICAgICAgICBhY2Nlc3Nvcnk6IHNlbGVjdGVkQ2hhcmdpbmdGYWNpbGl0eS52YWx1ZVsnY2hhcmdpbmdGYWNpbGl0eSddLAogICAgICAgICAgICAgICAgICBwcmljZTogc2VsZWN0ZWRDaGFyZ2luZ0ZhY2lsaXR5LnZhbHVlWydwcmljZSddCiAgICAgICAgICAgICAgICB9XTsKICAgICAgICAgICAgICAgIGNhck9yZGVyQWRkWydzdGF0dXMnXSA9IGNhck9yZGVyU3RhdHVzLnZhbHVlOwoKICAgICAgICAgICAgICAgIGlmICghKHVwZGF0ZUNhck9yZGVyVmFsdWUudmFsdWUgPT09IDEpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaChBY3Rpb25UeXBlcy5BRERfQ0FST1JERVIsIHsKICAgICAgICAgICAgICAgICAgY2FyT3JkZXJEYXRhOiBjYXJPcmRlckFkZCwKICAgICAgICAgICAgICAgICAgaWQ6IGNhck9yZGVySWQudmFsdWUKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBpZiAoY29tcGx5Q2FyUmVzcG9uc2UudmFsdWUgJiYgY29tcGx5Q2FyUmVzcG9uc2UudmFsdWUubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIHNob3dDb21wbHlQb3B1cC52YWx1ZSA9IHRydWU7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAxMzsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAxMjsKICAgICAgICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaChBY3Rpb25UeXBlcy5BRERfQ0FST1JERVIsIHsKICAgICAgICAgICAgICAgICAgY2FyT3JkZXJEYXRhOiBjYXJPcmRlckFkZAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICBpZiAoY29tcGx5Q2FyUmVzcG9uc2UudmFsdWUgJiYgY29tcGx5Q2FyUmVzcG9uc2UudmFsdWUubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIHNob3dDb21wbHlQb3B1cC52YWx1ZSA9IHRydWU7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTYpOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gb25Qcm9jZWVkQ2FyT3JkZXIoKSB7CiAgICAgICAgcmV0dXJuIF9yZWY2LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH07CiAgICB9KCk7CgogICAgdmFyIG9uQ2FyT3JkZXJSYWRpb0NsaWNrID0gZnVuY3Rpb24gb25DYXJPcmRlclJhZGlvQ2xpY2soaXRlbSkgewogICAgICB1cGRhdGVDYXJPcmRlclZhbHVlLnZhbHVlID0gaXRlbS5vcHRpb25JZDsKICAgIH07CgogICAgdmFyIGNvbnRpbnVlVG9PcmRlclByb2Nlc3MgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlZjcgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU3KHN0YXR1cykgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNyQoX2NvbnRleHQ3KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gaW5pdGlhbGl6ZSgpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBpZiAoY29sb3JzRmxhZy52YWx1ZS5pbnRlcmlvciAmJiBjb2xvcnNGbGFnLnZhbHVlLmV4dGVyaW9yICYmICFyZXF1aXJlZENob2ljZXNUaXRsZXMudmFsdWUubGVuZ3RoICYmICFOZXRNb250aGx5Q29zdEFuZEZsYWcudmFsdWUuZXhwZW5zaXZlRmxhZykgewogICAgICAgICAgICAgICAgICBjYXJPcmRlclN0YXR1cy52YWx1ZSA9IHN0YXR1czsKCiAgICAgICAgICAgICAgICAgIGlmICghY2FyT3JkZXJTdGF0dXMudmFsdWUgJiYgY2FyT3JkZXJJZC52YWx1ZSkgewogICAgICAgICAgICAgICAgICAgIHNob3dDYXJPcmRlclBvcHVwLnZhbHVlID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBvblByb2NlZWRDYXJPcmRlcigpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBpc0NvbG9yc1BvcHVwLnZhbHVlID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU3KTsKICAgICAgfSkpOwoKICAgICAgcmV0dXJuIGZ1bmN0aW9uIGNvbnRpbnVlVG9PcmRlclByb2Nlc3MoX3gzKSB7CiAgICAgICAgcmV0dXJuIF9yZWY3LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH07CiAgICB9KCk7CgogICAgdmFyIGNsb3NlQ29sb3JzUG9wdXAgPSBmdW5jdGlvbiBjbG9zZUNvbG9yc1BvcHVwKCkgewogICAgICBpc0NvbG9yc1BvcHVwLnZhbHVlID0gZmFsc2U7CiAgICB9OwoKICAgIHZhciBjbG9zZUNvbmZsaWN0ZWRPcHRpb25zUG9wdXAgPSBmdW5jdGlvbiBjbG9zZUNvbmZsaWN0ZWRPcHRpb25zUG9wdXAoKSB7CiAgICAgIHNob3dDb25mbGljdGVkT3B0aW9uc1BvcHVwLnZhbHVlID0gZmFsc2U7CiAgICAgIHN0b3JlLnN0YXRlLm9wdGlvbnMuY29uZmxpY3RlZE9wdGlvbnMgPSBbXTsKICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdtb2RhbC1vcGVuJyk7CiAgICB9OwoKICAgIHZhciBjbG9zZUNvbmZsaWN0ZWROZXN0ZWRPcHRpb25zUG9wdXAgPSBmdW5jdGlvbiBjbG9zZUNvbmZsaWN0ZWROZXN0ZWRPcHRpb25zUG9wdXAoKSB7CiAgICAgIGlmIChzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdvcHRpb25KdXN0QWRkZWQnKSkgewogICAgICAgIHJldmVydFNlbGVjdGVkT3B0aW9ucygnY29uZmxpY3RlZE5lc3RlZE9wdGlvbnMnKTsKICAgICAgfQogICAgfTsKCiAgICB2YXIgZW5hYmxlU2VsZWN0ZWRPcHRpb25zID0gZnVuY3Rpb24gZW5hYmxlU2VsZWN0ZWRPcHRpb25zKG9wdGlvbikgewogICAgICBpZiAoKG9wdGlvblsnbmV3U3RhdGUnXSA9PT0gJ3JlcXVpcmVkJyB8fCBvcHRpb25bJ2lzUGFjayddKSAmJiBvcHRpb25zQ29uZmlndXJhdGlvbkRhdGFbJ3VzZXJTZWxlY3RlZE9wdGlvbnMnXSkgewogICAgICAgIGlmIChvcHRpb25zQ29uZmlndXJhdGlvbkRhdGFbJ3VzZXJTZWxlY3RlZE9wdGlvbnMnXS5pbmNsdWRlcyhvcHRpb24ub3B0aW9uSWQudG9TdHJpbmcoKSkpIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICB9OwoKICAgIHJldHVybiB7CiAgICAgIGV4dGVyaW9ySW50ZXJpb3I6IGV4dGVyaW9ySW50ZXJpb3IsCiAgICAgIG9wdGlvbnM6IG9wdGlvbnMsCiAgICAgIGxvYWRlcjogbG9hZGVyLAogICAgICBnZXRQYWNrYWdlc0FuZE9wdGlvbnM6IGdldFBhY2thZ2VzQW5kT3B0aW9ucywKICAgICAgZm9ybWF0Q3VycmVuY3k6IGZvcm1hdEN1cnJlbmN5LAogICAgICBvbkNoZWNrOiBvbkNoZWNrLAogICAgICBnZXRUcmFuc2xhdGVkQ2F0ZWdvcnk6IGdldFRyYW5zbGF0ZWRDYXRlZ29yeSwKICAgICAgZ2V0U3RhdHVzOiBnZXRTdGF0dXMsCiAgICAgIHJlcXVpcmVkQ2hvaWNlc1RpdGxlczogcmVxdWlyZWRDaG9pY2VzVGl0bGVzLAogICAgICByZXF1aXJlZENob2ljZUluZGV4OiByZXF1aXJlZENob2ljZUluZGV4LAogICAgICBzaG93UG9wdXA6IHNob3dQb3B1cCwKICAgICAgb25Qb3B1cENsb3NlOiBvblBvcHVwQ2xvc2UsCiAgICAgIG9uUmFkaW9DbGljazogb25SYWRpb0NsaWNrLAogICAgICBvblByb2NlZWQ6IG9uUHJvY2VlZCwKICAgICAgcGFja01lbWJlcnNQb3BVcFRpdGxlOiBwYWNrTWVtYmVyc1BvcFVwVGl0bGUsCiAgICAgIHBhY2tNZW1iZXJzVGl0bGVzOiBwYWNrTWVtYmVyc1RpdGxlcywKICAgICAgb25DbG9zZTogb25DbG9zZSwKICAgICAgYWRkRmFjaWxpdHk6IGFkZEZhY2lsaXR5LAogICAgICBkZWxldGVGYWNpbGl0eTogZGVsZXRlRmFjaWxpdHksCiAgICAgIG9uTmFtZUlucHV0OiBvbk5hbWVJbnB1dCwKICAgICAgb25QcmljZUlucHV0OiBvblByaWNlSW5wdXQsCiAgICAgIG90aGVyczogb3RoZXJzLAogICAgICBvdGhlckFjY2Vzc29yaWVzRXJyb3JzOiBvdGhlckFjY2Vzc29yaWVzRXJyb3JzLAogICAgICBjYXJQb2xpY3lJZDogY2FyUG9saWN5SWQsCiAgICAgIHNlbGVjdGVkQ2hhcmdpbmdGYWNpbGl0eTogc2VsZWN0ZWRDaGFyZ2luZ0ZhY2lsaXR5LAogICAgICBzZWxlY3RDaGFyZ2luZ0ZhY2lsaXR5OiBzZWxlY3RDaGFyZ2luZ0ZhY2lsaXR5LAogICAgICBjdXJyZW50VXNlckNhck9yZGVyOiBjdXJyZW50VXNlckNhck9yZGVyLAogICAgICBjb21wbHlDYXJSZXNwb25zZTogY29tcGx5Q2FyUmVzcG9uc2UsCiAgICAgIGNhck9yZGVyQWRkOiBjYXJPcmRlckFkZCwKICAgICAgY29udGludWVUb09yZGVyUHJvY2VzczogY29udGludWVUb09yZGVyUHJvY2VzcywKICAgICAgY2xvc2VDb21wbHlQb3B1cDogY2xvc2VDb21wbHlQb3B1cCwKICAgICAgc2hvd0NvbXBseVBvcHVwOiBzaG93Q29tcGx5UG9wdXAsCiAgICAgIGNoZWNrQ2hhcmdpbmdGYWNpbGl0eTogY2hlY2tDaGFyZ2luZ0ZhY2lsaXR5LAogICAgICBnZXRDYXJzQnlJZDogZ2V0Q2Fyc0J5SWQsCiAgICAgIGNsb3NlQ2FyT3JkZXJQb3B1cDogY2xvc2VDYXJPcmRlclBvcHVwLAogICAgICBzaG93Q2FyT3JkZXJQb3B1cDogc2hvd0Nhck9yZGVyUG9wdXAsCiAgICAgIG9uQ2FyT3JkZXJSYWRpb0NsaWNrOiBvbkNhck9yZGVyUmFkaW9DbGljaywKICAgICAgb25Qcm9jZWVkQ2FyT3JkZXI6IG9uUHJvY2VlZENhck9yZGVyLAogICAgICBjb21wb25lbnRLZXk6IGNvbXBvbmVudEtleSwKICAgICAgZW5hYmxlU2VsZWN0ZWRPcHRpb25zOiBlbmFibGVTZWxlY3RlZE9wdGlvbnMsCiAgICAgIGNhck9yZGVyZWRUcnVlOiBjYXJPcmRlcmVkVHJ1ZSwKICAgICAgTmV0TW9udGhseUNvc3RBbmRGbGFnOiBOZXRNb250aGx5Q29zdEFuZEZsYWcsCiAgICAgIGNsb3NlRXhwZW5zaXZlUG9wdXA6IGNsb3NlRXhwZW5zaXZlUG9wdXAsCiAgICAgIGlzRXhwZW5zaXZlRmxhZzogaXNFeHBlbnNpdmVGbGFnLAogICAgICBjbG9zZUNvbG9yc1BvcHVwOiBjbG9zZUNvbG9yc1BvcHVwLAogICAgICBpc0NvbG9yc1BvcHVwOiBpc0NvbG9yc1BvcHVwLAogICAgICBjb2xvcnNNZXNzYWdlOiBjb2xvcnNNZXNzYWdlLAogICAgICBjaGVja0NvbmZsaWN0ZWRPcHRpb25zOiBjaGVja0NvbmZsaWN0ZWRPcHRpb25zLAogICAgICByZXZlcnRTZWxlY3RlZE9wdGlvbnM6IHJldmVydFNlbGVjdGVkT3B0aW9ucywKICAgICAgY2FyVHlwZTogY2FyVHlwZSwKICAgICAgbGVhc2VSYXRlRXJyb3I6IGxlYXNlUmF0ZUVycm9yLAogICAgICBzaG93Q29uZmxpY3RlZE9wdGlvbnNQb3B1cDogc2hvd0NvbmZsaWN0ZWRPcHRpb25zUG9wdXAsCiAgICAgIGNsb3NlQ29uZmxpY3RlZE9wdGlvbnNQb3B1cDogY2xvc2VDb25mbGljdGVkT3B0aW9uc1BvcHVwLAogICAgICBjb25mbGljdGVkT3B0aW9uczogY29uZmxpY3RlZE9wdGlvbnMsCiAgICAgIHNob3dDb25mbGljdGVkTmVzdGVkT3B0aW9uc1BvcHVwOiBzaG93Q29uZmxpY3RlZE5lc3RlZE9wdGlvbnNQb3B1cCwKICAgICAgY2xvc2VDb25mbGljdGVkTmVzdGVkT3B0aW9uc1BvcHVwOiBjbG9zZUNvbmZsaWN0ZWROZXN0ZWRPcHRpb25zUG9wdXAKICAgIH07CiAgfQp9KTs="},{"version":3,"sources":["/home/tamanna/htdocs/carconfiguratorfrontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/tamanna/htdocs/carconfiguratorfrontend/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/tamanna/htdocs/carconfiguratorfrontend/src/views/Step3.vue?vue&type=script&lang=ts"],"names":[],"mappings":"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","sourcesContent":["\nimport { defineComponent, computed, onMounted } from 'vue'\nimport toggleableContent from '@/components/toggleableContent.vue'\nimport { mandatoryAccessoriesType, step2ErrorsType } from '@/types'\nimport RadioButton from '@/components/UI/RadioButton.vue'\nimport formatCurrency from '@/filters/CurrencyFormat'\nimport Button from '@/components/UI/Button.vue'\nimport BackButton from '@/components/UI/BackButton.vue'\nimport OptionsCheckboxes from '@/components/UI/OptionsCheckboxes.vue'\nimport Loader from '@/components/UI/Loader.vue'\nimport { VueCookieNext } from 'vue-cookie-next'\nimport { AuthActionTypes } from '@/store/auth/actions'\nimport { ActionTypes } from '@/store/options/actions'\nimport { MutationTypes } from '@/store/options/mutations'\nimport { useStore } from '@/store'\nimport { reactive, watch, ref } from 'vue'\nimport { useRoute } from 'vue-router'\nimport _ from 'lodash'\nimport Popup from '@/components/Popup.vue'\nimport AddChargingFacilities from '@/components/AddChargingFacilities.vue'\nimport Dropdown from '@/components/UI/Dropdown.vue'\nimport { useI18n } from 'vue-i18n'\nimport { USER_STATUS } from '@/composables/staticValues'\nimport toLowerCase from '@/filters/toLowerCase'\n\nexport default defineComponent({\n  components: {\n    toggleableContent,\n    RadioButton,\n    Button,\n    BackButton,\n    OptionsCheckboxes,\n    Loader,\n    Popup,\n    AddChargingFacilities,\n    Dropdown\n  },\n  setup() {\n    const store = useStore()\n    const route = useRoute()\n    const componentKey = ref(0)\n    const requiredChoiceIndex = ref(0)\n    const showPopup = ref(false)\n    const showCarOrderPopup = ref(false)\n    const selectedCheckbox = ref('')\n    const packMembers = ref()\n    const updateCarOrderValue = ref(1)\n    const carOrderStatus = ref(0)\n    const isExpensiveFlag = ref(true)\n    const showConflictedOptionsPopup = ref(false)\n    const showConflictedNestedOptionsPopup = ref(false)\n    const { t } = useI18n({ useScope: 'global' })\n    const packMembersPopUpTitle = ref(t('_step3.itemsAdded'))\n    const optionsResponse = computed(() => store.state.options.optionsResponse)\n    const optionsResponseAsObject = computed(() => store.state.options.optionsResponseAsObject)\n    const nestedOptions = computed(() => store.state.options.nestedOptions)\n    const stateVehicleId = computed(() => store.state.options.vehicleId)\n    const exteriorInterior = reactive({\n      exteriorOptionC: [],\n      exteriorOptionO: [],\n      interiorOptionC: [],\n      interiorOptionO: []\n    })\n    const others: { value: mandatoryAccessoriesType[] } = reactive({\n      value: [\n        { accessory: '', price: '', type: 'add' }\n      ]\n    })\n    const convertToNumberAndFloat = (selectedOption) => {\n      return selectedOption.replace(/,/g, '.')\n    }\n    const removeType = (type) => {\n      const tempFacility = JSON.parse(JSON.stringify(type))\n      tempFacility.forEach((item) => {\n        delete item['type']\n        if (!item.accessory || !item.price) {\n          delete item['accessory']\n          delete item['price']\n        }\n        if (item['price']) item['price'] = convertToNumberAndFloat(item['price'])\n      })\n      return tempFacility.filter((item) => !(item && Object.keys(item).length === 0))\n    }\n    const showComplyPopup = ref(false)\n    const closeComplyPopup = () => {\n      showComplyPopup.value = false\n    }\n    const closeCarOrderPopup = () => {\n      showCarOrderPopup.value = false\n    }\n    const selectedOptions: Array<string> = []\n    let optionsConfigurationData = sessionStorage.getItem('optionsConfigurationData')\n      ? JSON.parse(sessionStorage.getItem('optionsConfigurationData') || '{}')\n      : {\n        selectedOptions: selectedOptions,\n        requiredChoices: [],\n        option: '',\n        action: '',\n        otherAccessories: [],\n        chargingFacilities: [],\n        userSelectedOptions: []\n      }\n    const isColorsPopup = ref(false)\n    const initialize = async () => {\n      // if new vehicleId entered and optionsConfiguration will be cleared\n      if (sessionStorage.getItem('currentVehicleId')) {\n        const getCurrentVehicleID = JSON.parse(sessionStorage.getItem('currentVehicleId'))\n        if (getCurrentVehicleID && getCurrentVehicleID !== route.params.vehicleId) {\n          optionsConfigurationData = {\n            selectedOptions: selectedOptions,\n            requiredChoices: [],\n            option: '',\n            action: '',\n            otherAccessories: [],\n            chargingFacilities: [],\n            userSelectedOptions: []\n          }\n          sessionStorage.removeItem('nestedOptions')\n          sessionStorage.removeItem('latestSelection')\n        }\n      }\n      // 43366520210701\n      // 809814620210101\n      // 786165220210401\n      // 433666\n      sessionStorage.setItem('optionsConfigurationData', JSON.stringify(optionsConfigurationData))\n      await store.dispatch(ActionTypes.GET_OPTIONS_CONFIGURATIONS, {\n        vehicleId: route.params.vehicleId,\n        selectedOptions: optionsConfigurationData,\n        selectedCheckbox: selectedCheckbox.value,\n        packMembers: packMembers.value,\n      })\n      if (document.getElementById('popup')) {\n        document.body.classList.add('modal-open')\n      } else {\n        document.body.classList.remove('modal-open')\n      }\n      isExpensiveFlag.value = true\n      isColorsPopup.value = false\n      // if new vehicleId entered\n      if (stateVehicleId.value)\n        sessionStorage.setItem('currentVehicleId', JSON.stringify(stateVehicleId.value))\n      // to track the option that just added\n      const optionJustAdded = optionsConfigurationData['userSelectedOptions'][optionsConfigurationData['userSelectedOptions'].length - 1]\n      sessionStorage.setItem('optionJustAdded', JSON.stringify([optionJustAdded]))\n      if (!optionJustAdded) {\n        sessionStorage.removeItem('optionJustAdded')\n      }\n      // check if any of the nestedOption is conflicted\n      const getNestedOptions = Object.entries(nestedOptions.value)\n      const allOptions = getNestedOptions.flat(2)\n      const conflictedOptionsDetails = optionsResponse.value\n        .filter(item => {\n          return allOptions.indexOf(item['optionId'].toString()) !== -1 && item.newState == 'conflicted'\n        })\n        .map(function (item) {\n          return { titleEn: item['titleEn'], titleNl: item['titleNl'], code: item['code'], optionID: item['optionId'].toString(), state: item.newState }\n        })\n      if (conflictedOptionsDetails.length) {\n        showConflictedNestedOptionsPopup.value = true\n      }\n    }\n    const loader = computed(() => store.state.options.optionsloader)\n    const options = computed(() => store.state.options.options)\n    const packagesAndOptions = computed(() => store.state.options.packagesAndOptions)\n    const requiredChoicesTitles = computed(() => store.state.options.requiredChoicesTitles)\n    const packMembersTitles = computed(() => store.state.options.packMembersTitles)\n    const carPolicyId = computed(() => store.state.auth.carPolicyByID)\n    const currentUserCarOrder = computed(() => store.state.auth.currentUser.carOrders)\n    const complyCarResponse = computed(() => store.state.options.complyCarResponse)\n    const getCarsById = computed(() => store.state.options.carsById.cars)\n    const carType = computed(() => store.state.options.carsById.cars['type_48602'] || store.state.options.carsById.cars['fuel_type_8702'])\n    const carOrderId = ref(route.params.carOrderId)\n    const carOrderedTrue = computed(() => toLowerCase(store.state.auth.currentUser.userStatus) === USER_STATUS.CAR_ORDERED)\n    const NetMonthlyCostAndFlag = computed(() => store.state.options.NetMonthlyCostAndFlag)\n    const colorsFlag = computed(() => store.state.options.colorsFlag)\n    const allSelectedOptions = computed(() => store.state.options.allSelectedOptions)\n    const latestSelection = computed(() => store.state.options.latestSelection)\n    const leaseRateError = computed(() => store.state.options.leaseRateError)\n    const conflictedOptions = computed(() => store.state.options.conflictedOptions)\n    const colorsMessage = computed(() => {\n      let errMessage = ''\n      if (!colorsFlag.value.interior && !colorsFlag.value.exterior) {\n        errMessage = t('_step3.selectBothColor')\n      } else if (colorsFlag.value.interior && !colorsFlag.value.exterior) {\n        errMessage = t('_step3.selectExteriorColor')\n      } else {\n        errMessage = t('_step3.selectInteriorColor')\n      }\n      return errMessage\n    })\n    const selectedChargingFacility = ref()\n    const carOrderAdd = reactive({\n      vehicleId: route.params.vehicleId,\n      monthlyCost: 13.74,\n      carPrice: 12.25,\n      chargingFacilities: [] as mandatoryAccessoriesType[]\n    })\n    const revertSelectedOptions = async (state) => {\n      let latestSelection\n      if (state == 'conflictedRequiredOptions')\n        latestSelection = JSON.parse(sessionStorage.getItem('latestSelection'))\n      else if (state == 'conflictedNestedOptions')\n        latestSelection = JSON.parse(sessionStorage.getItem('optionJustAdded'))\n      latestSelection.forEach((item) => {\n        delete nestedOptions.value[item]\n        const getNestedOptions = Object.entries(nestedOptions.value)\n        optionsConfigurationData['selectedOptions'] = getNestedOptions.flat(2)\n        if (optionsConfigurationData['userSelectedOptions'].indexOf(item) != -1)\n          optionsConfigurationData['userSelectedOptions'].splice(optionsConfigurationData['userSelectedOptions'].indexOf(item), 1)\n      })\n      optionsConfigurationData['action'] = ''\n      optionsConfigurationData['option'] = ''\n      await initialize()\n      if (state == 'conflictedRequiredOptions')\n        store.state.options.latestSelection = []\n      else if (state == 'conflictedNestedOptions')\n        showConflictedNestedOptionsPopup.value = false\n      document.body.classList.remove('modal-open')\n      sessionStorage.removeItem('optionJustAdded')\n    }\n    const onPopupClose = () => {\n      const selected = document.querySelector('input[type=radio][name=name]:checked')\n      if (selected) {\n        const selectedID = selected.id.replace('radio-', '')\n        store.state.options.latestSelection.push(selectedID)\n      }\n      if (sessionStorage.getItem('latestSelection')) {\n        revertSelectedOptions('conflictedRequiredOptions')\n      }\n      showPopup.value = false\n      store.commit(MutationTypes.SET_REQUIRED_CHOICES_TITLES, [])\n      store.commit(MutationTypes.SET_PACK_MEMBERS_TITLES, [])\n      document.body.classList.remove('modal-open')\n    }\n    const closeExpensivePopup = () => {\n      isExpensiveFlag.value = false\n      document.body.classList.remove('modal-open')\n    }\n    const onClose = () => {\n      showPopup.value = false\n      store.commit(MutationTypes.SET_PACK_MEMBERS_TITLES, [])\n      document.body.classList.remove('modal-open')\n      packMembers.value = ''\n    }\n    const getExteriorInterior = (prop, type) => {\n      let filteredExteriorInterior\n      if (options.value) {\n        const data = options.value?.[prop]\n        filteredExteriorInterior = data?.filter((item) => item['type'] == type)\n      }\n      return filteredExteriorInterior\n    }\n    const groupByOptionsType = () => {\n      const filteredExteriorOptionC = getExteriorInterior('exteriorColour', 'C')\n      const filteredExteriorOptionO = getExteriorInterior('exteriorColour', 'O')\n      const filteredInteriorOptionC = getExteriorInterior('interiorColour', 'C')\n      const filteredInteriorOptionO = getExteriorInterior('interiorColour', 'O')\n      exteriorInterior.exteriorOptionC = filteredExteriorOptionC\n      exteriorInterior.exteriorOptionO = filteredExteriorOptionO\n      exteriorInterior.interiorOptionC = filteredInteriorOptionC\n      exteriorInterior.interiorOptionO = filteredInteriorOptionO\n    }\n    const getCarPolicyById = async () => {\n      await store.dispatch(AuthActionTypes.GET_CARPOLICY_BY_ID, {\n        companyId: VueCookieNext.getCookie('companyId'),\n        carPolicyId: VueCookieNext.getCookie('employeeCarPolicyId')\n      })\n    }\n    const otherAccessoriesErrors: Array<step2ErrorsType> = reactive([{\n      facilityError: '',\n      priceError: ''\n    }])\n    onMounted(async () => {\n      await initialize()\n      await groupByOptionsType()\n      await getCarPolicyById()\n      selectedChargingFacility.value = carPolicyId.value?.chargingFacility[0]\n      if (optionsConfigurationData['chargingFacilities'].length) {\n        selectedChargingFacility.value.chargingFacility = optionsConfigurationData['chargingFacilities'][0]['accessory']\n        selectedChargingFacility.value.price = optionsConfigurationData['chargingFacilities'][0]['price']\n      }\n      if (optionsConfigurationData['otherAccessories'].length) {\n        Array.prototype.unshift.apply(others.value, optionsConfigurationData['otherAccessories'])\n        for (let i = 0; i < optionsConfigurationData['otherAccessories'].length; i++) {\n          otherAccessoriesErrors.unshift({\n            facilityError: '',\n            priceError: ''\n          })\n        }\n      }\n    })\n    const checkIfEqual = (array1, array2) => {\n      if (array1.length === array2.length) {\n        return array1.every((element, index) => {\n          if (element === array2[index]) {\n            return true\n          }\n          return false\n        });\n      }\n      return false;\n    }\n    watch(\n      () => _.cloneDeep(options.value),\n      () => {\n        groupByOptionsType()\n      }\n    )\n    watch(\n      () => _.cloneDeep(requiredChoicesTitles.value),\n      () => {\n        requiredChoiceIndex.value = 0\n      }\n    )\n    watch(\n      () => route.params.vehicleId,\n      () => {\n        sessionStorage.removeItem('optionsConfigurationData')\n        sessionStorage.removeItem('nestedOptions')\n        sessionStorage.removeItem('latestSelection')\n        sessionStorage.removeItem('currentVehicleId')\n      },\n    )\n    watch(\n      () => _.cloneDeep(allSelectedOptions.value),\n      () => {\n        const mergedArray = [...new Set([...optionsConfigurationData['selectedOptions'], ...allSelectedOptions.value])];\n        if (!checkIfEqual(optionsConfigurationData['selectedOptions'], mergedArray)) {\n          optionsConfigurationData['selectedOptions'] = mergedArray\n          initialize()\n        }\n      }\n    )\n    watch(\n      () => _.cloneDeep(latestSelection.value),\n      (currentValue) => {\n        sessionStorage.setItem('latestSelection', JSON.stringify(currentValue))\n        if (!latestSelection.value.length) {\n          sessionStorage.removeItem('latestSelection')\n        }\n      }\n    )\n    watch(\n      () => _.cloneDeep(nestedOptions.value),\n      (currentValue) => {\n        if (optionsConfigurationData['action'] == 'added' && optionsConfigurationData['option'] && optionsResponse.value.length) {\n          const addToNestedOptions = (selectedOptionId, key) => {\n            const packMembers = optionsResponseAsObject.value[selectedOptionId]['packMembers']\n            const requiredOptions = optionsResponseAsObject.value[selectedOptionId]['required']\n            const flattenArray = [...new Set([...packMembers ?? '', ...requiredOptions ?? ''])];\n            return flattenArray.forEach((value) => {\n              if (store.state.options.nestedOptions[key].indexOf(value) === -1) {\n                store.state.options.nestedOptions[key].push(value)\n              }\n            })\n          }\n          const userSelectedOptionIds = optionsConfigurationData['userSelectedOptions']\n          userSelectedOptionIds.forEach((optionId) => {\n            addToNestedOptions(optionId, optionId)\n            currentValue[optionId].forEach((nestedOptionId) => {\n              addToNestedOptions(nestedOptionId, optionId)\n            })\n          })\n        }\n        sessionStorage.setItem('nestedOptions', JSON.stringify(currentValue))\n        if (!Object.keys(nestedOptions.value).length) {\n          sessionStorage.removeItem('nestedOptions')\n        }\n      }\n    )\n    watch(\n      () => _.cloneDeep(conflictedOptions.value),\n      (currentValue) => {\n        if (currentValue.length) {\n          showConflictedOptionsPopup.value = true\n          currentValue.forEach((item) => {\n            optionsConfigurationData['selectedOptions'].splice(optionsConfigurationData['selectedOptions'].indexOf(item['optionID']), 1)\n            optionsConfigurationData['userSelectedOptions'].splice(optionsConfigurationData['userSelectedOptions'].indexOf(item['optionID']), 1)\n            delete nestedOptions.value[item['optionID']]\n          })\n          initialize()\n        }\n      }\n    )\n    const getFilteredPackageOptions = (prop, type) => {\n      let filteredPackagesAndOptions\n      if (packagesAndOptions.value) {\n        const data = packagesAndOptions.value?.[prop]\n        filteredPackagesAndOptions = data?.filter((item) => item['type'] == type)\n      }\n      return filteredPackagesAndOptions\n    }\n    const getPackagesAndOptions = (type) => {\n      const packageOptions = {}\n      for (const key in packagesAndOptions.value) {\n        const result = getFilteredPackageOptions(key, type)\n        if (result && result.length) {\n          packageOptions[key] = result\n        }\n      }\n      return packageOptions\n    }\n    const setToDefault = () => {\n      showPopup.value = true\n      requiredChoiceIndex.value = 0\n    }\n    const checkChargingFacility = (fuelType) => {\n      if (fuelType == 'electric' || fuelType == 'plug_in_hybrid') {\n        if (carPolicyId.value.fuelType) {\n          const checkFuelType = carPolicyId.value.fuelType.some((item) => item.title == fuelType && item.isChargingMandatory == 1)\n          return checkFuelType\n        }\n      } else {\n        return false\n      }\n    }\n    const onCheck = async (item) => {\n      optionsConfigurationData['option'] = item['option'].target.id\n      optionsConfigurationData['action'] = item['option'].target.checked ? 'added' : 'removed'\n      if (optionsConfigurationData['selectedOptions'].indexOf(item['option'].target.id) === -1) {\n        optionsConfigurationData['selectedOptions'].push(item['option'].target.id)\n      }\n      if (optionsConfigurationData['userSelectedOptions'].indexOf(item['option'].target.id) === -1) {\n        optionsConfigurationData['userSelectedOptions'].push(item['option'].target.id)\n      }\n      if (!item['option'].target.checked) {\n        optionsConfigurationData['selectedOptions'].splice(\n          optionsConfigurationData['selectedOptions'].indexOf(item['option'].target.id),\n          1\n        )\n        optionsConfigurationData['userSelectedOptions'].splice(\n          optionsConfigurationData['userSelectedOptions'].indexOf(item['option'].target.id),\n          1\n        )\n        packMembersPopUpTitle.value = t('_step3.itemsRemoved')\n        // if unchecked removed selectedOptions + packMembers + requiredOptions\n        delete nestedOptions.value[optionsConfigurationData['option']]\n        const getNestedOptions = Object.entries(nestedOptions.value)\n        optionsConfigurationData['selectedOptions'] = getNestedOptions.flat(2)\n      } else {\n        packMembersPopUpTitle.value = t('_step3.itemsAdded')\n      }\n      selectedCheckbox.value = item['option'].target.id\n      packMembers.value = item.packMembers\n      await initialize()\n      setToDefault()\n      componentKey.value += 1\n    }\n    const onRadioClick = (item) => {\n      const optionId = item.optionId\n      selectedCheckbox.value = optionId\n      packMembers.value = item.packMembers\n    }\n    const onProceed = () => {\n      const selected = document.querySelector('input[type=radio][name=name]:checked')\n      if (selected) {\n        const selectedID = selected.id.replace('radio-', '')\n        optionsConfigurationData['action'] = 'added'\n        optionsConfigurationData['option'] = selectedID\n        optionsConfigurationData['selectedOptions'].push(selectedID)\n        optionsConfigurationData['userSelectedOptions'].push(selectedID)\n        store.state.options.latestSelection.push(selectedID)\n        initialize()\n      }\n      if (requiredChoiceIndex.value < requiredChoicesTitles.value.length - 1) {\n        requiredChoiceIndex.value += 1\n      }\n    }\n    const checkConflictedOptions = (options) => {\n      const isStateConflicted = options.every(function (item) {\n        return item['newState'] == 'conflicted'\n      })\n      return isStateConflicted\n    }\n    const getTranslatedCategory = (item) => {\n      let category = '_configure.other'\n      if (item == 'Safety') {\n        category = '_configure.safety'\n      } else if (item == 'Driving & braking') {\n        category = '_configure.drivingAndBraking'\n      } else if (item == 'Audio & Entertainment') {\n        category = '_configure.audioEntertainment'\n      } else if (item == 'Comfort') {\n        category = '_configure.comfort'\n      } else if (item == 'Interior colour') {\n        category = '_configure.interiorColour'\n      } else if (item == 'Exterior colour') {\n        category = '_configure.exteriorColour'\n      }\n      return category\n    }\n    const getStatus = (item) => {\n      return item['newState'] === 'selected' || item['isPack'] == true || item['newState'] === 'required'\n    }\n    const addToOptionsConfigurations = () => {\n      optionsConfigurationData['otherAccessories'] = !others.value[0]['accessory'] ? [] : removeType(others.value)\n      initialize()\n    }\n    const addFacility = (item) => {\n      others.value.push({\n        accessory: '', price: '', type: 'add'\n      })\n      others.value[item['index']]['type'] = 'delete'\n      otherAccessoriesErrors.push({\n        facilityError: '',\n        priceError: ''\n      })\n      addToOptionsConfigurations()\n    }\n    const deleteFacility = (item) => {\n      others.value.splice(item['index'], 1)\n      addToOptionsConfigurations()\n    }\n    const selectChargingFacility = (item) => {\n      selectedChargingFacility.value = item\n      if (checkChargingFacility(carType.value ?? ''))\n        optionsConfigurationData['chargingFacilities'] = [{\n          accessory: selectedChargingFacility.value['chargingFacility'],\n          price: selectedChargingFacility.value['price']\n        }]\n      initialize()\n    }\n    const onNameInput = (option) => {\n      others.value[option['index']]['accessory'] = option['item']\n      delete otherAccessoriesErrors[option['index']]['facilityError']\n      if (others.value[option['index']]['accessory'].length < 2 || others.value[option['index']]['accessory'].length > 250) {\n        otherAccessoriesErrors[option['index']]['facilityError'] = 'LengthError'\n      }\n    }\n    const onPriceInput = (option) => {\n      others.value[option['index']]['price'] = option['item']\n      delete otherAccessoriesErrors[option['index']]['priceError']\n      if (!others.value[option['index']]['price'].match(/^[0-9.,]*$/)) {\n        otherAccessoriesErrors[option['index']]['priceError'] = 'typeError'\n      }\n    }\n    const getFilteredNestedOptions = () => {\n      const nestedOptions = JSON.parse(sessionStorage.getItem('nestedOptions'))\n      const options = []\n      for (const key in nestedOptions) {\n        optionsResponse.value\n          .forEach((item) => {\n            if (item['optionId'].toString() == key) {\n              options.push({ titleEn: item['titleEn'], titleNl: item['titleNl'], code: item['code'], optionId: item['optionId'], type: item['type'], price: item['price'], priceExcludingVAT: item['priceExcludingVAT'], category: item['category'], children: nestedOptions[key] })\n            }\n          })\n      }\n      options.forEach((option) => {\n        const nestedChildern = optionsResponse.value\n          .filter((item) => {\n            return option.children.indexOf(item['optionId'].toString()) !== -1\n          })\n          .map(function (item) {\n            return { titleEn: item['titleEn'], titleNl: item['titleNl'], code: item['code'], optionId: item['optionId'], type: item['type'], price: item['price'], priceExcludingVAT: item['priceExcludingVAT'], category: item['category'] }\n          })\n        option.children = nestedChildern\n      })\n      return options\n    }\n    const onProceedCarOrder = async () => {\n      carOrderAdd['co2Emission'] = getCarsById.value['combined_62203'],\n        carOrderAdd['options'] = getFilteredNestedOptions()\n      carOrderAdd['otherAccessories'] = !others.value[0]['accessory'] ? [] : removeType(others.value)\n      if (checkChargingFacility(carType.value ?? ''))\n        carOrderAdd['chargingFacilities'] = [{\n          accessory: selectedChargingFacility.value['chargingFacility'],\n          price: selectedChargingFacility.value['price']\n        }]\n      carOrderAdd['status'] = carOrderStatus.value\n      if (updateCarOrderValue.value === 1) {\n        await store.dispatch(ActionTypes.ADD_CARORDER, { carOrderData: carOrderAdd, id: carOrderId.value })\n        if (complyCarResponse.value && complyCarResponse.value.length) {\n          showComplyPopup.value = true\n        }\n      } else {\n        await store.dispatch(ActionTypes.ADD_CARORDER, { carOrderData: carOrderAdd })\n        if (complyCarResponse.value && complyCarResponse.value.length) {\n          showComplyPopup.value = true\n        }\n      }\n    }\n\n    const onCarOrderRadioClick = (item) => {\n      updateCarOrderValue.value = item.optionId\n    }\n    const continueToOrderProcess = async (status) => {\n      await initialize()\n      if (colorsFlag.value.interior && colorsFlag.value.exterior && !requiredChoicesTitles.value.length && !NetMonthlyCostAndFlag.value.expensiveFlag) {\n        carOrderStatus.value = status\n        if(!carOrderStatus.value && carOrderId.value) {\n          showCarOrderPopup.value = true\n        } else {\n          onProceedCarOrder()\n        }\n      } else {\n        isColorsPopup.value = true\n      }\n    }\n\n    const closeColorsPopup = () => {\n      isColorsPopup.value = false\n    }\n    const closeConflictedOptionsPopup = () => {\n      showConflictedOptionsPopup.value = false\n      store.state.options.conflictedOptions = []\n      document.body.classList.remove('modal-open')\n    }\n    const closeConflictedNestedOptionsPopup = () => {\n      if (sessionStorage.getItem('optionJustAdded')) {\n        revertSelectedOptions('conflictedNestedOptions')\n      }\n    }\n    const enableSelectedOptions = (option) => {\n      if ((option['newState'] === 'required' || option['isPack']) && optionsConfigurationData['userSelectedOptions']) {\n        if (optionsConfigurationData['userSelectedOptions'].includes(option.optionId.toString())) {\n          return false\n        }\n        return true\n      }\n    }\n    return {\n      exteriorInterior,\n      options,\n      loader,\n      getPackagesAndOptions,\n      formatCurrency,\n      onCheck,\n      getTranslatedCategory,\n      getStatus,\n      requiredChoicesTitles,\n      requiredChoiceIndex,\n      showPopup,\n      onPopupClose,\n      onRadioClick,\n      onProceed,\n      packMembersPopUpTitle,\n      packMembersTitles,\n      onClose,\n      addFacility,\n      deleteFacility,\n      onNameInput,\n      onPriceInput,\n      others,\n      otherAccessoriesErrors,\n      carPolicyId,\n      selectedChargingFacility,\n      selectChargingFacility,\n      currentUserCarOrder,\n      complyCarResponse,\n      carOrderAdd,\n      continueToOrderProcess,\n      closeComplyPopup,\n      showComplyPopup,\n      checkChargingFacility,\n      getCarsById,\n      closeCarOrderPopup,\n      showCarOrderPopup,\n      onCarOrderRadioClick,\n      onProceedCarOrder,\n      componentKey,\n      enableSelectedOptions,\n      carOrderedTrue,\n      NetMonthlyCostAndFlag,\n      closeExpensivePopup,\n      isExpensiveFlag,\n      closeColorsPopup,\n      isColorsPopup,\n      colorsMessage,\n      checkConflictedOptions,\n      revertSelectedOptions,\n      carType,\n      leaseRateError,\n      showConflictedOptionsPopup,\n      closeConflictedOptionsPopup,\n      conflictedOptions,\n      showConflictedNestedOptionsPopup,\n      closeConflictedNestedOptionsPopup\n    }\n  }\n})\n"],"sourceRoot":""}]}