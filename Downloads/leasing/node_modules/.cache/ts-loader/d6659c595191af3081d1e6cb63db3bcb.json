{"remainingRequest":"/home/tamanna/htdocs/carconfiguratorfrontend/node_modules/babel-loader/lib/index.js!/home/tamanna/htdocs/carconfiguratorfrontend/node_modules/ts-loader/index.js??ref--14-2!/home/tamanna/htdocs/carconfiguratorfrontend/node_modules/eslint-loader/index.js??ref--13-0!/home/tamanna/htdocs/carconfiguratorfrontend/src/api/refreshToken.ts","dependencies":[{"path":"/home/tamanna/htdocs/carconfiguratorfrontend/src/api/refreshToken.ts","mtime":1678204643778},{"path":"/home/tamanna/htdocs/carconfiguratorfrontend/node_modules/cache-loader/dist/cjs.js","mtime":1691610247617},{"path":"/home/tamanna/htdocs/carconfiguratorfrontend/node_modules/babel-loader/lib/index.js","mtime":1691610247572},{"path":"/home/tamanna/htdocs/carconfiguratorfrontend/node_modules/ts-loader/index.js","mtime":1691610259533},{"path":"/home/tamanna/htdocs/carconfiguratorfrontend/node_modules/eslint-loader/index.js","mtime":1691610259081}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3RhbWFubmEvaHRkb2NzL2NhcmNvbmZpZ3VyYXRvcmZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvaG9tZS90YW1hbm5hL2h0ZG9jcy9jYXJjb25maWd1cmF0b3Jmcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIi9ob21lL3RhbWFubmEvaHRkb2NzL2NhcmNvbmZpZ3VyYXRvcmZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0cyI7CmltcG9ydCBfY3JlYXRlU3VwZXIgZnJvbSAiL2hvbWUvdGFtYW5uYS9odGRvY3MvY2FyY29uZmlndXJhdG9yZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZVN1cGVyIjsKaW1wb3J0IHsgQmFzZUFwaSB9IGZyb20gJy4vYmFzZSc7CmltcG9ydCB7IFZ1ZUNvb2tpZU5leHQgfSBmcm9tICd2dWUtY29va2llLW5leHQnOwppbXBvcnQgcm91dGVyIGZyb20gJ0Avcm91dGVyJzsKCnZhciBOb0F1dGhBcGkgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9CYXNlQXBpKSB7CiAgX2luaGVyaXRzKE5vQXV0aEFwaSwgX0Jhc2VBcGkpOwoKICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKE5vQXV0aEFwaSk7CgogIGZ1bmN0aW9uIE5vQXV0aEFwaSgpIHsKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTm9BdXRoQXBpKTsKCiAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHByb2Nlc3MuZW52LlZVRV9BUFBfQVBJX1VSTCk7CgogICAgX3RoaXMucmVmcmVzaFRva2VuID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gX3RoaXMuaW5zdGFuY2UucG9zdCgiYXBpL3Rva2VuL3JlZnJlc2giKTsKICAgIH07CgogICAgX3RoaXMuX2hhbmRsZVJlcXVlc3QgPSBmdW5jdGlvbiAoY29uZmlnKSB7CiAgICAgIGNvbmZpZy53aXRoQ3JlZGVudGlhbHMgPSB0cnVlOwogICAgICByZXR1cm4gY29uZmlnOwogICAgfTsKCiAgICBfdGhpcy5faGFuZGxlRXJyb3IgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShlcnJvcikgewogICAgICAgIHZhciBzdGF0dXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCFlcnJvci5yZXNwb25zZSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHN0YXR1cyA9IGVycm9yLnJlc3BvbnNlLnN0YXR1czsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gc3RhdHVzOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IF9jb250ZXh0LnQwID09PSA0MDEgPyA1IDogMTU7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgVnVlQ29va2llTmV4dC5yZW1vdmVDb29raWUoJ2NvbXBhbnlJZCcpOwogICAgICAgICAgICAgICAgVnVlQ29va2llTmV4dC5yZW1vdmVDb29raWUoJ2FkbWluQ29tcGFueUlkJyk7CiAgICAgICAgICAgICAgICBWdWVDb29raWVOZXh0LnJlbW92ZUNvb2tpZSgnZW1wbG95ZWVDYXJQb2xpY3lJZCcpOwogICAgICAgICAgICAgICAgVnVlQ29va2llTmV4dC5yZW1vdmVDb29raWUoJ3JvbGVzJyk7CiAgICAgICAgICAgICAgICBWdWVDb29raWVOZXh0LnJlbW92ZUNvb2tpZSgnbGF0ZXN0Y2FyT3JkZXJJZCcpOwogICAgICAgICAgICAgICAgVnVlQ29va2llTmV4dC5yZW1vdmVDb29raWUoJ3N0YXR1cycpOwogICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2UuY2xlYXIoKTsKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpOwogICAgICAgICAgICAgICAgcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgICBuYW1lOiAnbG9naW4nCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIFByb21pc2UucmVqZWN0KGVycm9yKSk7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICAgIG5hbWU6ICdFcnJvclBhZ2UnCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIFByb21pc2UucmVqZWN0KGVycm9yKSk7CgogICAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjQ7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICAgIGlmICghZXJyb3IucmVxdWVzdCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIFByb21pc2UucmVqZWN0KGVycm9yKSk7CgogICAgICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBQcm9taXNlLnJlamVjdChlcnJvcikpOwoKICAgICAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKTsKCiAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gpIHsKICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgfSgpOwoKICAgIF90aGlzLmluc3RhbmNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoX3RoaXMuX2hhbmRsZVJlc3BvbnNlLCBfdGhpcy5faGFuZGxlRXJyb3IpOwoKICAgIF90aGlzLmluc3RhbmNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShfdGhpcy5faGFuZGxlUmVxdWVzdCk7CgogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgcmV0dXJuIE5vQXV0aEFwaTsKfShCYXNlQXBpKTsKCnZhciBub0F1dGhBcGkgPSBuZXcgTm9BdXRoQXBpKCk7CmV4cG9ydCBkZWZhdWx0IG5vQXV0aEFwaTs="},{"version":3,"sources":["/home/tamanna/htdocs/carconfiguratorfrontend/node_modules/eslint-loader/index.js??ref--13-0!/home/tamanna/htdocs/carconfiguratorfrontend/src/api/refreshToken.ts"],"names":[],"mappings":";;;;;;AAAA,SAAS,OAAT,QAAwB,QAAxB;AAIA,SAAS,aAAT,QAA8B,iBAA9B;AACA,OAAO,MAAP,MAAmB,UAAnB;;IAEM,S;;;;;AACF,uBAAA;AAAA;;AAAA;;AACI,8BAAM,OAAO,CAAC,GAAR,CAAY,eAAlB;;AAIG,UAAA,YAAA,GAAe;AAAA,aAAM,MAAK,QAAL,CAAc,IAAd,qBAAN;AAAA,KAAf;;AACG,UAAA,cAAA,GAAiB,UAAC,MAAD,EAA+B;AACtD,MAAA,MAAM,CAAC,eAAP,GAAyB,IAAzB;AACA,aAAO,MAAP;AACH,KAHS;;AAIA,UAAA,YAAA;AAAA,yEAAe,iBAAO,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACjB,KAAK,CAAC,QADW;AAAA;AAAA;AAAA;;AAET,gBAAA,MAFS,GAEE,KAAK,CAAC,QAFR,CAET,MAFS;AAAA,8BAGT,MAHS;AAAA,gDAIR,GAJQ;AAAA;;AAAA;AAKT,gBAAA,aAAa,CAAC,YAAd,CAA2B,WAA3B;AACA,gBAAA,aAAa,CAAC,YAAd,CAA2B,gBAA3B;AACA,gBAAA,aAAa,CAAC,YAAd,CAA2B,qBAA3B;AACA,gBAAA,aAAa,CAAC,YAAd,CAA2B,OAA3B;AACA,gBAAA,aAAa,CAAC,YAAd,CAA2B,kBAA3B;AACA,gBAAA,aAAa,CAAC,YAAd,CAA2B,QAA3B;AACA,gBAAA,cAAc,CAAC,KAAf;AACA,gBAAA,YAAY,CAAC,KAAb;AACA,gBAAA,MAAM,CAAC,IAAP,CAAY;AAAE,kBAAA,IAAI,EAAE;AAAR,iBAAZ;AAbS,iDAcF,OAAO,CAAC,MAAR,CAAe,KAAf,CAdE;;AAAA;AAgBT,gBAAA,MAAM,CAAC,IAAP,CAAY;AAAE,kBAAA,IAAI,EAAE;AAAR,iBAAZ;AAhBS,iDAiBF,OAAO,CAAC,MAAR,CAAe,KAAf,CAjBE;;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAmBV,KAAK,CAAC,OAnBI;AAAA;AAAA;AAAA;;AAAA,iDAuBV,OAAO,CAAC,MAAR,CAAe,KAAf,CAvBU;;AAAA;AAAA,iDA0BV,OAAO,CAAC,MAAR,CAAe,KAAf,CA1BU;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAf;;AAAA;AAAA;AAAA;AAAA;;AARN,UAAK,QAAL,CAAc,YAAd,CAA2B,QAA3B,CAAoC,GAApC,CAAwC,MAAK,eAA7C,EAA8D,MAAK,YAAnE;;AACA,UAAK,QAAL,CAAc,YAAd,CAA2B,OAA3B,CAAmC,GAAnC,CAAuC,MAAK,cAA5C;;AAHJ;AAIC;;;EALmB,O;;AA0CxB,IAAM,SAAS,GAAc,IAAI,SAAJ,EAA7B;AAEA,eAAe,SAAf","sourcesContent":["import { BaseApi } from './base'\nimport { UserLogInResponse } from '@/types'\nimport { AxiosRequestConfig } from 'axios'\nimport { AxiosError } from 'axios'\nimport { VueCookieNext } from 'vue-cookie-next'\nimport router from '@/router'\n\nclass NoAuthApi extends BaseApi {\n    public constructor() {\n        super(process.env.VUE_APP_API_URL)\n        this.instance.interceptors.response.use(this._handleResponse, this._handleError)\n        this.instance.interceptors.request.use(this._handleRequest)\n    }\n    public refreshToken = () => this.instance.post<UserLogInResponse>(`api/token/refresh`)\n    protected _handleRequest = (config: AxiosRequestConfig) => {\n        config.withCredentials = true\n        return config\n    }\n    protected _handleError = async (error: AxiosError) => {\n        if (error.response) {\n            const { status } = error.response\n            switch (status) {\n                case 401:\n                    VueCookieNext.removeCookie('companyId')\n                    VueCookieNext.removeCookie('adminCompanyId')\n                    VueCookieNext.removeCookie('employeeCarPolicyId')\n                    VueCookieNext.removeCookie('roles')\n                    VueCookieNext.removeCookie('latestcarOrderId')\n                    VueCookieNext.removeCookie('status')\n                    sessionStorage.clear()\n                    localStorage.clear()\n                    router.push({ name: 'login' })\n                    return Promise.reject(error)\n                default:\n                    router.push({ name: 'ErrorPage' })\n                    return Promise.reject(error)\n            }\n        } else if (error.request) {\n            // The request was made but no response was received\n            // `error.request` is an instance of XMLHttpRequest in the browser and an instance of\n            // http.ClientRequest in node.js\n            return Promise.reject(error)\n        } else {\n            // Something happened in setting up the request that triggered an Error\n            return Promise.reject(error)\n        }\n    }\n}\n\nconst noAuthApi: NoAuthApi = new NoAuthApi()\n\nexport default noAuthApi\n"],"sourceRoot":""}]}